define(["react","lodash","@grafana/ui","@grafana/data","emotion","@grafana/runtime","moment","app/core/utils/datemath","app/plugins/sdk","react-dom"],(function(e,t,n,r,o,a,i,s,l,c){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=74)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){e.exports=n(72)()},function(e,t,n){"use strict";n.d(t,"x",(function(){return u})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"v",(function(){return h})),n.d(t,"s",(function(){return g})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return b})),n.d(t,"j",(function(){return E})),n.d(t,"a",(function(){return x})),n.d(t,"e",(function(){return w})),n.d(t,"r",(function(){return P})),n.d(t,"q",(function(){return C})),n.d(t,"u",(function(){return O})),n.d(t,"h",(function(){return S})),n.d(t,"w",(function(){return k})),n.d(t,"b",(function(){return N})),n.d(t,"i",(function(){return T})),n.d(t,"l",(function(){return j})),n.d(t,"t",(function(){return z})),n.d(t,"p",(function(){return _})),n.d(t,"d",(function(){return R})),n.d(t,"k",(function(){return F})),n.d(t,"m",(function(){return A}));var r=n(1),o=n.n(r),a=n(11),i=n.n(a),s=n(4),l=n(8),c=n(6),u=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::(\w+))?}/g;function p(e,t){for(var n,r,a,i,s,l=t.substring(t.indexOf("[")+1,t.lastIndexOf("]")),c=(n=l,r=[],a=!1,i=!1,s="",o.a.forEach(n,(function(e){'"'===e&&i?s+=e:'"'===e&&a?a=!1:'"'!==e||a?"["!==e||a?"]"!==e||a?","!==e||a||i?s+=e:(r.push(s),s=""):i=!1:i=!0:a=!0})),r.push(s),r),u=c.length;u>=1;u--)e=e.replace("$"+u,c[u-1]);return e}function d(e){return o.a.forEach(e,(function(e){return e.item=e.name,e.name=p(e.item,e.key_),e})),e}var f=/{\$[A-Z0-9_\.]+}/g;function m(e){return f.test(e)}function h(e,t,n){var r=n?e.url:e.name,a=r.match(f);return o.a.forEach(a,(function(a){var i=o.a.filter(t,(function(t){if(t.hostid){if(n){var r=!1;return o.a.forEach(e.hosts,(function(e){e.hostid===t.hostid&&(r=!0)})),r}return t.hostid===e.hostid}return!0})),s=o.a.find(i,{macro:a});if(s&&s.value){var l=s.value,c=new RegExp(function(e){return e=e.replace(/\$/,"\\$")}(a));r=r.replace(c,l)}})),r}function g(e){var t,n=[];o.a.each(function(e){var t;if(function(e){return/^\{.+\}$/.test(e)}(e)){var n=e.match(/\{[^\{\}]*\}|\{\/.*\/\}/g);t=o.a.map(n,(function(e){return o.a.trim(e,"{}")}))}else t=e.split(".");return t}(e),(function(e){"*"===e&&(e="/.*/"),n.push(e)}));var r=o.a.zipObject(["group","host","app","item"],n);switch(4===n.length&&"/.*/"===r.app&&(r.app=""),n.length){case 1:t=l.b.Group;break;case 2:t=l.b.Host;break;case 3:t=l.b.Application;break;case 4:t=l.b.Item}return{queryType:t,group:r.group||"",host:r.host||"",application:r.app||"",item:r.item||""}}var v=/^\/(.*)\/([gmi]*)$/m;function y(e){return v.test(e)}function b(e,t){if(/^\$\w+/.test(e)){var n=o.a.map(t,(function(e){return"$"+e.name}));return o.a.includes(n,e)}return!1}function E(e){var t=e.to.diff(e.from),n=Math.round(t/1e3),r=c.rangeUtil.secondsToHms(t/1e3);return{__range_ms:{text:t,value:t},__range_s:{text:n,value:n},__range:{text:r,value:r},__range_series:{text:s.k,value:s.k}}}function x(e){var t=e.match(v),n=t[1],r=""!==t[2]?t[2]:void 0;return new RegExp(n,r)}function w(e){return e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}function P(e){var t=function(e){var t=/(^[\d]+)(y|M|w|d|h|m|s)?/g.exec(e);if(!t||!e||t.length>2&&!t[2])return"";return t[1]+(t.length>2?t[2]:"s")}(e);return t?C(t):0}function C(e){var t=/(^[\d]+)(y|M|w|d|h|m|s)/g.exec(e);return i.a.duration(Number(t[1]),t[2]).valueOf()}function O(e){var t=/^([\+\-]*)([\d]+)(y|M|w|d|h|m|s)/g.exec(e);return"+"===t[1]?0-i.a.duration(Number(t[2]),t[3]).valueOf():i.a.duration(Number(t[2]),t[3]).valueOf()}function S(e){if(e.length){var t="<br><br>Acknowledges:<br><table><tr><td><b>Time</b></td><td><b>User</b></td><td><b>Comments</b></td></tr>";return o.a.each(o.a.map(e,(function(e){return"<tr><td><i>"+i.a.unix(e.clock).format("DD MMM YYYY HH:mm:ss")+"</i></td><td>"+e.alias+" ("+e.name+" "+e.surname+")</td><td>"+e.message+"</td></tr>"})),(function(e){t=t.concat(e)})),t=t.concat("</table>")}return""}function k(e){return function(t){for(var n=0;n<e.length;n++)t=e[n].call(this,t);return t}}function N(e){return e.replace(/\s+/g," ").trim()}function T(e,t){if(void 0===t&&(t=0),0===e.length)return 1;var n=e[0];return o.a.isArray(n)?T(n,t+1):t+1}function j(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e){if(!e)return[];var t=o.a.map(e.split(","),(function(e){return e.trim()}));return t=o.a.map(t,(function(e){var t=e.split(":");return{tag:t[0].trim(),value:t[1].trim()}}))}function _(e){return e||[]}var D={"%":"percent",b:"decbits",bps:"bps",B:"bytes",Bps:"binBps",uptime:"dtdhms",qps:"qps",iops:"iops",Hz:"hertz",V:"volt",C:"celsius",RPM:"rotrpm",dBm:"dBm"},M=function(){for(var e={},t=0,n=Object(c.getValueFormats)();t<n.length;t++)for(var r=0,o=n[t].submenu;r<o.length;r++){var a=o[r].value;e[a]=a}return e}();function R(e){var t=D[e];return t||(t=M[e]),t}function F(e,t){var n=e.valuemapid,r=null==t?void 0:t.find((function(e){return e.valuemapid===n}));return r?r.mappings.map((function(e,t){return{id:t,type:c.MappingType.ValueToText,value:e.value,text:e.newvalue}})):null}function A(e){return e.fields.length&&e.fields[0].type===c.FieldType.other&&"problems"===e.fields[0].config.custom.type}},function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"r",(function(){return d})),n.d(t,"q",(function(){return f})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return g})),n.d(t,"l",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"k",(function(){return b})),n.d(t,"c",(function(){return E}));var r="alexanderzobnin-zabbix-triggers-panel",o=0,a=1,i=0,s=1,l=2,c=3,u=4,p=5,d=0,f=1,m=2,h=4,g=8,v=[{val:0,text:"Not classified"},{val:1,text:"Information"},{val:2,text:"Warning"},{val:3,text:"Average"},{val:4,text:"High"},{val:5,text:"Disaster"}],y=3600,b="range_series",E=1001},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t,n){"use strict";var r,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),function(e){e.Group="group",e.Host="host",e.Application="application",e.Item="item",e.ItemValues="itemValues"}(r||(r={})),function(e){e.Problems="problems",e.Recent="recent",e.History="history"}(o||(o={}))},function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
                                                                                                                                                                                                                                                                                                                                                                                 Copyright (c) 2017 Jed Watson.
                                                                                                                                                                                                                                                                                                                                                                                 Licensed under the MIT License (MIT), see
                                                                                                                                                                                                                                                                                                                                                                                 http://jedwatson.github.io/classnames
                                                                                                                                                                                                                                                                                                                                                                               */!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var s=i.apply(null,n);s&&e.push(s)}else if("object"===r)for(var l in n)a.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):"object"===o(n(42))&&n(42)?void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r):window.classNames=i}()},function(e,t){e.exports=a},function(e,t){e.exports=i},,function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return p}));var r=n(1),o=n.n(r),a=n(11),i=n.n(a),s=n(3);function l(e,t){try{var n=s.q(t);return Date.now()-1e3*e.timestamp<n}catch(e){return!1}}function c(e,t){var n=t||"DD MMM YYYY HH:mm:ss";return i.a.unix(e).format(n)}var u=function(e){return o.a.find("ABCDEFGHIJKLMNOPQRSTUVWXYZ",(function(t){return o.a.every(e,(function(e){return e.refId!==t}))}))};function p(e,t){var n,r,o,a,i;return t&&Object.keys(t).length>0&&(e+="?"+(n=[],r=/\[\]$/,o=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,t){t="function"==typeof t?t():null==t?"":t,n[n.length]="boolean"!=typeof t?d(e,!0)+"="+d(t,!0):d(e,!0)},(i=function(e,t){var s,l,c;if(e)if(o(t))for(s=0,l=t.length;s<l;s++)r.test(e)?a(e,t[s]):i(e,t[s]);else if(t&&"[object Object]"===String(t))for(c in t)i(e+"["+c+"]",t[c]);else a(e,t);else if(o(t))for(s=0,l=t.length;s<l;s++)a(t[s].name,t[s].value);else for(c in t)i(c,t[c]);return n})("",t).join("&"))),e}function d(e,t){return encodeURIComponent(e).replace(/%25/gi,"%2525").replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}},function(e,t){e.exports=s},,,,function(e,t){e.exports=l},function(e,t){e.exports=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(1),o=n.n(r),a=n(13),i=n(8),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=8;function c(e){var t;if(function(e){return e.targets&&1===e.targets.length&&function(e){var t,n,r,o;return!((null===(t=e.group)||void 0===t?void 0:t.filter)||(null===(n=e.host)||void 0===n?void 0:n.filter)||(null===(r=e.application)||void 0===r?void 0:r.filter)||(null===(o=e.trigger)||void 0===o?void 0:o.filter)||e.queryType)}(e.targets[0])}(e))return e;if(function(e){return!e.datasource&&!e.datasources&&!e.triggers&&(t=e.targets,!t||o.a.isArray(t)&&(0===t.length||1===t.length&&o.a.isEmpty(t[0])));var t}(e))return delete e.targets,e;var n=function(e){return e.schemaVersion||1}(e);if(n<2&&(e.datasources=[e.datasource],e.targets={},e.targets[e.datasources[0]]=e.triggers,delete e.triggers,delete e.datasource),n<3&&(delete e.lastChangeField,delete e.infoField,delete e.scroll,delete e.hideHostsInMaintenance),n<5&&e.targets&&!o.a.isEmpty(e.targets)&&o.a.each(e.targets,(function(e){var t;o.a.defaultsDeep(e,{group:{filter:""},host:{filter:""},application:{filter:""},trigger:{filter:""},tags:{filter:""},proxy:{filter:""},refId:Object(a.b)(t)})})),n<6&&e.showEvents&&"1"===e.showEvents.value&&(e.showEvents.value=1),n<7){var r=[];for(var i in e.targets){d(g=e.targets[i])||f(g,i)||r.push(s(s({},g),{datasource:i}))}for(var l=0,c=r;l<c.length;l++){(g=c[l]).refId||(g.refId=Object(a.b)(r))}e.targets=r,delete e.datasources}if(n<8){1===e.targets.length?e.targets[0].datasource&&(e.datasource=e.targets[0].datasource,delete e.targets[0].datasource):e.targets.length>1&&(e.datasource="-- Mixed --");for(var m=0,h=e.targets;m<h.length;m++){var g;(g=h[m]).queryType=5,g.showProblems=p(e),g.options=u(e),o.a.defaults(g.options,{hostsInMaintenance:!0}),o.a.defaults(g,{tags:{filter:""}})}e.sortProblems="priority"===(null===(t=e.sortTriggersBy)||void 0===t?void 0:t.value)?"priority":"lastchange",delete e.showEvents,delete e.showTriggers,delete e.hostsInMaintenance,delete e.sortTriggersBy}return e}function u(e){var t,n=2;"acknowledged"===e.showTriggers?n=1:"unacknowledged"===e.showTriggers&&(n=0);var r=1001;return e.limit&&100!==e.limit&&(r=e.limit),{hostsInMaintenance:e.hostsInMaintenance,sortProblems:"priority"===(null===(t=e.sortTriggersBy)||void 0===t?void 0:t.value)?"priority":"default",minSeverity:0,acknowledged:n,limit:r}}function p(e){var t,n,r,o;return 1===(null===(t=e.showEvents)||void 0===t?void 0:t.value)?i.a.Problems:0===(null===(n=e.showEvents)||void 0===n?void 0:n.value)||(null===(o=null===(r=e.showEvents)||void 0===r?void 0:r.value)||void 0===o?void 0:o.length)>1?i.a.History:i.a.Problems}function d(e){return!e||!(e.group&&e.host&&e.application&&e.trigger)}function f(e,t){return e&&"A"===e.refId&&"0"===t}},,,,,,,,,,,,,,,,,,,,,,function(e,t){(function(t){e.exports=t}).call(this,{})},,,,function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r="undefined"!=typeof Element,o="function"==typeof Map,a="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,t){try{return function e(t,s){if(t===s)return!0;if(t&&s&&"object"==n(t)&&"object"==n(s)){if(t.constructor!==s.constructor)return!1;var l,c,u,p;if(Array.isArray(t)){if((l=t.length)!=s.length)return!1;for(c=l;0!=c--;)if(!e(t[c],s[c]))return!1;return!0}if(o&&t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(p=t.entries();!(c=p.next()).done;)if(!s.has(c.value[0]))return!1;for(p=t.entries();!(c=p.next()).done;)if(!e(c.value[1],s.get(c.value[0])))return!1;return!0}if(a&&t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(p=t.entries();!(c=p.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if((l=t.length)!=s.length)return!1;for(c=l;0!=c--;)if(t[c]!==s[c])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((l=(u=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(c=l;0!=c--;)if(!Object.prototype.hasOwnProperty.call(s,u[c]))return!1;if(r&&t instanceof Element)return!1;for(c=l;0!=c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!t.$$typeof)&&!e(t[u[c]],s[u[c]]))return!1;return!0}return t!=t&&s!=s}(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(73);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(19),i=n.n(a),s=n(1),l=n.n(s),c=n(10),u=n(6),p=n(14),d=n(18);var f=["$scope",function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.editor=this,this.panelCtrl=t.ctrl,this.panel=this.panelCtrl.panel,this.layouts=[{text:"Table",value:"table"},{text:"List",value:"list"}],this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.ackFilters=["all triggers","unacknowledged","acknowledged"],this.sortingOptions=[{text:"Default",value:"default"},{text:"Last change",value:"lastchange"},{text:"Severity",value:"priority"}],this.showEventsFields=[{text:"All",value:[0,1]},{text:"OK",value:[0]},{text:"Problems",value:1}]}];function m(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/options_tab.html",controller:f}}var h=n(20),g=n(9),v=n.n(g),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var E={get:function(e,t,n){if(!t)return e;var r=w(t),o=void 0;try{o=r.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==o?o:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=w(t),o=void 0,a=e;for(;(o=r.shift())&&r.length;)a[o]||(a[o]={}),a=a[o];return a[o]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,o){for(var a=0;a<t.length;a+=1){var i=t[a],s=!1===n[a]||"desc"===n[a],l=i(e,o);if(l)return s?-l:l}return n[0]?e[r]-o[r]:o[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,a=b(t,["children","className"]);return o.a.createElement("div",y({className:v()(e,r)},a),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var o="function"==typeof t?t(n,r):n[t];return e[o]=x(e[o])?e[o]:[],e[o].push(n),e}),{})},isArray:x,splitProps:function(e){var t=e.className,n=e.style,r=b(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map((function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0}));return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return P(e)?o.a.createElement(e,t):"function"==typeof e?e(t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function x(e){return Array.isArray(e)}function w(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(x(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}function P(e){return function(e){return"function"==typeof e&&!!Object.getPrototypeOf(e).isReactComponent}(e)||function(e){return"function"==typeof e&&String(e).includes(".createElement")}(e)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==C(t)&&"function"!=typeof t?e:t}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==N(t)&&"function"!=typeof t?e:t}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var B=function(e){return o.a.createElement("button",H({type:"button"},e,{className:"-btn"}),e.children)},W=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==F(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+F(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),A(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.page!==e.page&&this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"getPageJumpProperties",value:function(){var e=this;return{onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()},onBlur:this.applyPage,value:""===this.state.page?"":this.state.page+1,onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},inputType:""===this.state.page?"text":"number",pageJumpText:this.props.pageJumpText}}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,a=t.showPageSizeOptions,i=t.pageSizeOptions,s=t.pageSize,l=t.showPageJump,c=t.canPrevious,u=t.canNext,p=t.onPageSizeChange,d=t.className,f=t.PreviousComponent,m=t.NextComponent,h=t.renderPageJump,g=t.renderCurrentPage,y=t.renderTotalPagesCount,b=t.renderPageSizeOptions;return o.a.createElement("div",{className:v()(d,"-pagination"),style:this.props.style},o.a.createElement("div",{className:"-previous"},o.a.createElement(f,{onClick:function(){c&&e.changePage(r-1)},disabled:!c},this.props.previousText)),o.a.createElement("div",{className:"-center"},o.a.createElement("span",{className:"-pageInfo"},this.props.pageText," ",l?h(this.getPageJumpProperties()):g(r)," ",this.props.ofText," ",y(n)),a&&b({pageSize:s,rowsSelectorText:this.props.rowsSelectorText,pageSizeOptions:i,onPageSizeChange:p,rowsText:this.props.rowsText})),o.a.createElement("div",{className:"-next"},o.a.createElement(m,{onClick:function(){u&&e.changePage(r+1)},disabled:!u},this.props.nextText)))}}]),t}(r.Component);W.defaultProps={PreviousComponent:B,NextComponent:B,renderPageJump:function(e){var t=e.onChange,n=e.value,r=e.onBlur,a=e.onKeyPress,i=e.inputType,s=e.pageJumpText;return o.a.createElement("div",{className:"-pageJump"},o.a.createElement("input",{"aria-label":s,type:i,onChange:t,value:n,onBlur:r,onKeyPress:a}))},renderCurrentPage:function(e){return o.a.createElement("span",{className:"-currentPage"},e+1)},renderTotalPagesCount:function(e){return o.a.createElement("span",{className:"-totalPages"},e||1)},renderPageSizeOptions:function(e){var t=e.pageSize,n=e.pageSizeOptions,r=e.rowsSelectorText,a=e.onPageSizeChange,i=e.rowsText;return o.a.createElement("span",{className:"select-wrap -pageSizeOptions"},o.a.createElement("select",{"aria-label":r,onChange:function(e){return a(Number(e.target.value))},value:t},n.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e+" "+i)}))))}};var L=W,I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function U(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var K=function(){return{}},G={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPage:0,defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null==t?"":t,(e="string"==typeof(e=null==e?"":e)?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:K,getTableProps:K,getTheadGroupProps:K,getTheadGroupTrProps:K,getTheadGroupThProps:K,getTheadProps:K,getTheadTrProps:K,getTheadThProps:K,getTheadFilterProps:K,getTheadFilterTrProps:K,getTheadFilterThProps:K,getTbodyProps:K,getTrGroupProps:K,getTrProps:K,getTdProps:K,getTfootProps:K,getTfootTrProps:K,getTfootTdProps:K,getPaginationProps:K,getLoadingProps:K,getNoDataProps:K,getResizerProps:K,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,Placeholder:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,minResizeWidth:11,className:"",style:{},getProps:K,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:K,footerClassName:"",footerStyle:{},getFooterProps:K,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",pageJumpText:"jump to page",rowsSelectorText:"rows per page",TableComponent:function(e){var t=e.children,n=e.className,r=U(e,["children","className"]);return o.a.createElement("div",I({className:v()("rt-table",n),role:"grid"},r),t)},TheadComponent:E.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:E.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=U(e,["children","className"]);return o.a.createElement("div",I({className:v()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=U(e,["children","className"]);return o.a.createElement("div",I({className:v()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,a=U(e,["toggleSort","className","children"]);return o.a.createElement("div",I({className:v()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},a),r)},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=U(e,["toggleSort","className","children"]);return o.a.createElement("div",I({className:v()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:E.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange,r=e.column;return o.a.createElement("input",{type:"text",style:{width:"100%"},placeholder:r.Placeholder,value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return o.a.createElement("div",{className:v()("rt-expander",t&&"-open")},"•")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return o.a.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return void 0!==e[n.id]})).map((function(e,r){return o.a.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return o.a.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:L,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,a=U(e,["className","loading","loadingText"]);return o.a.createElement("div",I({className:v()("-loading",{"-active":n},t)},a),o.a.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:E.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:E.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return o.a.createElement("span",null," ")}},q=n(2),V=n.n(q),$={data:V.a.any,loading:V.a.bool,showPagination:V.a.bool,showPaginationTop:V.a.bool,showPaginationBottom:V.a.bool,showPageSizeOptions:V.a.bool,pageSizeOptions:V.a.array,defaultPageSize:V.a.number,showPageJump:V.a.bool,collapseOnSortingChange:V.a.bool,collapseOnPageChange:V.a.bool,collapseOnDataChange:V.a.bool,freezeWhenExpanded:V.a.bool,sortable:V.a.bool,resizable:V.a.bool,filterable:V.a.bool,defaultSortDesc:V.a.bool,defaultSorted:V.a.array,defaultFiltered:V.a.array,defaultResized:V.a.array,defaultExpanded:V.a.object,defaultFilterMethod:V.a.func,defaultSortMethod:V.a.func,onPageChange:V.a.func,onPageSizeChange:V.a.func,onSortedChange:V.a.func,onFilteredChange:V.a.func,onResizedChange:V.a.func,onExpandedChange:V.a.func,pivotBy:V.a.array,pivotValKey:V.a.string,pivotIDKey:V.a.string,subRowsKey:V.a.string,aggregatedKey:V.a.string,nestingLevelKey:V.a.string,originalKey:V.a.string,indexKey:V.a.string,groupedByPivotKey:V.a.string,onFetchData:V.a.func,className:V.a.string,style:V.a.object,getProps:V.a.func,getTableProps:V.a.func,getTheadGroupProps:V.a.func,getTheadGroupTrProps:V.a.func,getTheadGroupThProps:V.a.func,getTheadProps:V.a.func,getTheadTrProps:V.a.func,getTheadThProps:V.a.func,getTheadFilterProps:V.a.func,getTheadFilterTrProps:V.a.func,getTheadFilterThProps:V.a.func,getTbodyProps:V.a.func,getTrGroupProps:V.a.func,getTrProps:V.a.func,getTdProps:V.a.func,getTfootProps:V.a.func,getTfootTrProps:V.a.func,getTfootTdProps:V.a.func,getPaginationProps:V.a.func,getLoadingProps:V.a.func,getNoDataProps:V.a.func,getResizerProps:V.a.func,columns:V.a.arrayOf(V.a.shape({Cell:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),Header:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),Footer:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),Aggregated:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),Pivot:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),PivotValue:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),Expander:V.a.oneOfType([V.a.element,V.a.string,V.a.func]),Filter:V.a.oneOfType([V.a.element,V.a.func]),sortable:V.a.bool,resizable:V.a.bool,filterable:V.a.bool,show:V.a.bool,minWidth:V.a.number,minResizeWidth:V.a.number,className:V.a.string,style:V.a.object,getProps:V.a.func,aggregate:V.a.func,headerClassName:V.a.string,headerStyle:V.a.object,getHeaderProps:V.a.func,footerClassName:V.a.string,footerStyle:V.a.object,getFooterProps:V.a.func,filterMethod:V.a.func,filterAll:V.a.bool,sortMethod:V.a.func})),expanderDefaults:V.a.shape({sortable:V.a.bool,resizable:V.a.bool,filterable:V.a.bool,width:V.a.number}),pivotDefaults:V.a.object,previousText:V.a.node,nextText:V.a.node,loadingText:V.a.node,noDataText:V.a.node,pageText:V.a.node,ofText:V.a.node,rowsText:V.a.node,pageJumpText:V.a.node,rowsSelectorText:V.a.node,TableComponent:V.a.elementType,TheadComponent:V.a.elementType,TbodyComponent:V.a.elementType,TrGroupComponent:V.a.elementType,TrComponent:V.a.elementType,ThComponent:V.a.elementType,TdComponent:V.a.elementType,TfootComponent:V.a.elementType,FilterComponent:V.a.elementType,ExpanderComponent:V.a.elementType,PivotValueComponent:V.a.elementType,AggregatedComponent:V.a.elementType,PivotComponent:V.a.elementType,PaginationComponent:V.a.elementType,PreviousComponent:V.a.elementType,NextComponent:V.a.elementType,LoadingComponent:V.a.elementType,NoDataComponent:V.a.elementType,ResizerComponent:V.a.elementType,PadRowComponent:V.a.elementType};function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Q=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==Y(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:e.defaultPage,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+Y(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Z(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,a=t.style,i=t.getProps,s=t.getTableProps,l=t.getTheadGroupProps,c=t.getTheadGroupTrProps,u=t.getTheadGroupThProps,p=t.getTheadProps,d=t.getTheadTrProps,f=t.getTheadThProps,m=t.getTheadFilterProps,h=t.getTheadFilterTrProps,g=t.getTheadFilterThProps,y=t.getTbodyProps,b=t.getTrGroupProps,x=t.getTrProps,w=t.getTdProps,P=t.getTfootProps,C=t.getTfootTrProps,O=t.getTfootTdProps,S=t.getPaginationProps,k=t.getLoadingProps,N=t.getNoDataProps,T=t.getResizerProps,j=t.showPagination,z=t.showPaginationTop,_=t.showPaginationBottom,D=t.manual,M=t.loadingText,R=t.noDataText,F=t.sortable,A=t.multiSort,H=t.resizable,B=t.filterable,W=t.pivotIDKey,L=t.pivotValKey,I=t.pivotBy,U=t.subRowsKey,K=t.aggregatedKey,q=t.originalKey,V=t.indexKey,$=t.groupedByPivotKey,Y=t.loading,Z=t.pageSize,Q=t.page,ee=t.sorted,te=t.filtered,ne=t.resized,re=t.expanded,oe=t.pages,ae=t.onExpandedChange,ie=t.TableComponent,se=t.TheadComponent,le=t.TbodyComponent,ce=t.TrGroupComponent,ue=t.TrComponent,pe=t.ThComponent,de=t.TdComponent,fe=t.TfootComponent,me=t.PaginationComponent,he=t.LoadingComponent,ge=t.SubComponent,ve=t.NoDataComponent,ye=t.ResizerComponent,be=t.ExpanderComponent,Ee=t.PivotValueComponent,xe=t.PivotComponent,we=t.AggregatedComponent,Pe=t.FilterComponent,Ce=t.PadRowComponent,Oe=t.resolvedData,Se=t.allVisibleColumns,ke=t.headerGroups,Ne=t.hasHeaderGroups,Te=t.sortedData,je=t.currentlyResizing,ze=Z*Q,_e=ze+Z,De=D?Oe:Te.slice(ze,_e),Me=this.getMinRows(),Re=E.range(Math.max(Me-De.length,0)),Fe=Se.some((function(e){return e.Footer})),Ae=B||Se.some((function(e){return e.filterable})),He=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,o){var a=X({},t,{_viewIndex:r+=1}),i=n.concat([o]);if(a[U]&&E.get(re,i)){var s=e(a[U],i,r),l=J(s,2);a[U]=l[0],r=l[1]}return a})),r]}(De),Be=J(He,1);De=Be[0];var We=Q>0,Le=Q+1<oe,Ie=E.sum(Se.map((function(e){var t=ne.find((function(t){return t.id===e.id}))||{};return E.getFirstDefined(t.value,e.width,e.minWidth)}))),Ue=-1,Ke=X({},t,{startRow:ze,endRow:_e,pageRows:De,minRows:Me,padRows:Re,hasColumnFooter:Fe,canPrevious:We,canNext:Le,rowMinWidth:Ie}),Ge=E.splitProps(i(Ke,void 0,void 0,this)),qe=E.splitProps(s(Ke,void 0,void 0,this)),Ve=E.splitProps(y(Ke,void 0,void 0,this)),$e=k(Ke,void 0,void 0,this),Ye=N(Ke,void 0,void 0,this),Je=function(t,n){var r=function(e){return(ne.find((function(t){return t.id===e.id}))||{}).value},a=E.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),i=E.sum(t.columns.map((function(e){return E.getFirstDefined(r(e),e.width,e.minWidth)}))),s=E.sum(t.columns.map((function(e){return E.getFirstDefined(r(e),e.width,e.maxWidth)}))),l=E.splitProps(u(Ke,void 0,t,e)),c=E.splitProps(t.getHeaderProps(Ke,void 0,t,e)),p=[t.headerClassName,l.className,c.className],d=X({},t.headerStyle,l.style,c.style),f=X({},l.rest,c.rest),m={flex:a+" 0 auto",width:E.asPx(i),maxWidth:E.asPx(s)};return o.a.createElement(pe,X({key:n+"-"+t.id,className:v()(p),style:X({},d,m)},f),E.normalizeComponent(t.Header,{data:Te,column:t}))},Xe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a=ee.find((function(e){return e.id===t.id})),i="function"==typeof t.show?t.show():t.show,s=E.getFirstDefined(r.value,t.width,t.minWidth),l=E.getFirstDefined(r.value,t.width,t.maxWidth),c=E.splitProps(f(Ke,void 0,t,e)),u=E.splitProps(t.getHeaderProps(Ke,void 0,t,e)),p=[t.headerClassName,c.className,u.className],d=X({},t.headerStyle,c.style,u.style),m=X({},c.rest,u.rest),h=E.getFirstDefined(t.resizable,H,!1),g=h?o.a.createElement(ye,X({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},T("finalState",void 0,t,e))):null,y=E.getFirstDefined(t.sortable,F,!1);return o.a.createElement(pe,X({key:n+"-"+t.id,className:v()(p,h&&"rt-resizable-header",a?a.desc?"-sort-desc":"-sort-asc":"",y&&"-cursor-pointer",!i&&"-hidden",I&&I.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:X({},d,{flex:s+" 0 auto",width:E.asPx(s),maxWidth:E.asPx(l)}),toggleSort:function(n){y&&e.sortColumn(t,!!A&&n.shiftKey)}},m),o.a.createElement("div",{className:v()(h&&"rt-resizable-header-content")},E.normalizeComponent(t.Header,{data:Te,column:t})),g)},Ze=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a=E.getFirstDefined(r.value,t.width,t.minWidth),i=E.getFirstDefined(r.value,t.width,t.maxWidth),s=E.splitProps(g(Ke,void 0,t,e)),l=E.splitProps(t.getHeaderProps(Ke,void 0,t,e)),c=[t.headerClassName,s.className,l.className],u=X({},t.headerStyle,s.style,l.style),p=X({},s.rest,l.rest),d=te.find((function(e){return e.id===t.id})),f=t.Filter||Pe,m=E.getFirstDefined(t.filterable,B,!1);return o.a.createElement(pe,X({key:n+"-"+t.id,className:v()(c),style:X({},u,{flex:a+" 0 auto",width:E.asPx(a),maxWidth:E.asPx(i)})},p),m?E.normalizeComponent(f,{column:t,filter:d,onChange:function(n){return e.filterColumn(t,n)}},G.column.Filter):null)},Qe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a="function"==typeof t.show?t.show():t.show,i=E.getFirstDefined(r.value,t.width,t.minWidth),s=i,l=E.getFirstDefined(r.value,t.width,t.maxWidth),c=E.splitProps(w(Ke,void 0,t,e)),u=E.splitProps(t.getProps(Ke,void 0,t,e)),p=[c.className,t.className,u.className],d=X({},c.style,t.style,u.style);return o.a.createElement(de,X({key:n+"-"+t.id,className:v()(p,!a&&"hidden"),style:X({},d,{flex:s+" 0 auto",width:E.asPx(i),maxWidth:E.asPx(l)})},c.rest),E.normalizeComponent(Ce))},et=function(t,n){var r=b(Ke,void 0,void 0,e),a=E.splitProps(x(Ke,void 0,void 0,e));return o.a.createElement(ce,X({key:"pad-"+n},r),o.a.createElement(ue,{className:v()("-padRow",(De.length+n)%2?"-even":"-odd",a.className),style:a.style||{}},Se.map(Qe)))},tt=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a="function"==typeof t.show?t.show():t.show,i=E.getFirstDefined(r.value,t.width,t.minWidth),s=E.getFirstDefined(r.value,t.width,t.maxWidth),l=E.splitProps(O(Ke,void 0,t,e)),c=E.splitProps(t.getProps(Ke,void 0,t,e)),u=E.splitProps(t.getFooterProps(Ke,void 0,t,e)),p=[l.className,t.className,c.className,u.className],d=X({},l.style,t.style,c.style,u.style);return o.a.createElement(de,X({key:n+"-"+t.id,className:v()(p,!a&&"hidden"),style:X({},d,{flex:i+" 0 auto",width:E.asPx(i),maxWidth:E.asPx(s)})},c.rest,l.rest,u.rest),E.normalizeComponent(t.Footer,{data:Te,column:t}))},nt=function(n){var r=E.splitProps(S(Ke,void 0,void 0,e));return o.a.createElement(me,X({},t,{pages:oe,canPrevious:We,canNext:Le,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:r.className,style:r.style,isTop:n},r.rest))},rt=function(){return o.a.createElement("div",X({className:v()("ReactTable",r,Ge.className),style:X({},a,Ge.style)},Ge.rest),j&&z?o.a.createElement("div",{className:"pagination-top"},nt(!0)):null,o.a.createElement(ie,X({className:v()(qe.className,je?"rt-resizing":""),style:qe.style},qe.rest),Ne?(g=E.splitProps(l(Ke,void 0,void 0,e)),y=E.splitProps(c(Ke,void 0,void 0,e)),o.a.createElement(se,X({className:v()("-headerGroups",g.className),style:X({},g.style,{minWidth:Ie+"px"})},g.rest),o.a.createElement(ue,X({className:y.className,style:y.style},y.rest),ke.map(Je)))):null,(u=E.splitProps(p(Ke,void 0,void 0,e)),f=E.splitProps(d(Ke,void 0,void 0,e)),o.a.createElement(se,X({className:v()("-header",u.className),style:X({},u.style,{minWidth:Ie+"px"})},u.rest),o.a.createElement(ue,X({className:f.className,style:f.style},f.rest),Se.map(Xe)))),Ae?(i=E.splitProps(m(Ke,void 0,void 0,e)),s=E.splitProps(h(Ke,void 0,void 0,e)),o.a.createElement(se,X({className:v()("-filters",i.className),style:X({},i.style,{minWidth:Ie+"px"})},i.rest),o.a.createElement(ue,X({className:s.className,style:s.style},s.rest),Se.map(Ze)))):null,o.a.createElement(le,X({className:v()(Ve.className),style:X({},Ve.style,{minWidth:Ie+"px"})},Ve.rest),De.map((function(t,n){return function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={original:n[q],row:n,index:n[V],viewIndex:Ue+=1,pageSize:Z,page:Q,level:a.length,nestingPath:a.concat([r]),aggregated:n[K],groupedByPivot:n[$],subRows:n[U]},s=E.get(re,i.nestingPath),l=b(Ke,i,void 0,e),c=E.splitProps(x(Ke,i,void 0,e));return o.a.createElement(ce,X({key:i.nestingPath.join("_")},l),o.a.createElement(ue,X({className:v()(c.className,n._viewIndex%2?"-even":"-odd"),style:c.style},c.rest),Se.map((function(t,r){var a=ne.find((function(e){return e.id===t.id}))||{},l="function"==typeof t.show?t.show():t.show,c=E.getFirstDefined(a.value,t.width,t.minWidth),u=E.getFirstDefined(a.value,t.width,t.maxWidth),p=E.splitProps(w(Ke,i,t,e)),d=E.splitProps(t.getProps(Ke,i,t,e)),f=[p.className,t.className,d.className],m=X({},p.style,t.style,d.style),h=X({},i,{isExpanded:s,column:X({},t),value:i.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:l,width:c,maxWidth:u,tdProps:p,columnProps:d,classes:f,styles:m}),g=h.value,y=void 0,b=void 0,x=void 0,P=E.normalizeComponent(t.Cell,h,g),C=t.Aggregated||(t.aggregate?t.Cell:we),O=t.Expander||be,S=t.PivotValue||Ee,k=xe||function(e){return o.a.createElement("div",null,o.a.createElement(O,e),o.a.createElement(S,e))},N=t.Pivot||k;(h.pivoted||h.expander)&&(h.expandable=!0,y=!0,!h.pivoted||h.subRows||ge||(h.expandable=!1)),h.pivoted?(b=i.row[W]===t.id&&h.subRows,x=I.indexOf(t.id)>I.indexOf(i.row[W])&&h.subRows,P=b?E.normalizeComponent(N,X({},h,{value:n[L]}),n[L]):x?E.normalizeComponent(C,h,g):null):h.aggregated&&(P=E.normalizeComponent(C,h,g)),h.expander&&(P=E.normalizeComponent(O,h,n[L]),I&&(h.groupedByPivot&&(P=null),h.subRows||ge||(P=null)));var T=y?function(t){var n=E.clone(re);return n=s?E.set(n,h.nestingPath,!1):E.set(n,h.nestingPath,{}),e.setStateWithData({expanded:n},(function(){return ae&&ae(n,h.nestingPath,t,h)}))}:function(){},j={onClick:T};return p.rest.onClick&&(j.onClick=function(e){p.rest.onClick(e,(function(){return T(e)}))}),d.rest.onClick&&(j.onClick=function(e){d.rest.onClick(e,(function(){return T(e)}))}),o.a.createElement(de,X({key:r+"-"+t.id,className:v()(f,!h.expandable&&!l&&"hidden",h.expandable&&"rt-expandable",(b||x)&&"rt-pivot"),style:X({},m,{flex:c+" 0 auto",width:E.asPx(c),maxWidth:E.asPx(u)})},p.rest,d.rest,j),P)}))),i.subRows&&s&&i.subRows.map((function(e,n){return t(e,n,i.nestingPath)})),ge&&!i.subRows&&s&&ge(i,(function(){var e=E.clone(re);E.set(e,i.nestingPath,!1)})))}(t,n)})),Re.map(et)),Fe?(t=E.splitProps(P(Ke,void 0,void 0,e)),n=E.splitProps(C(Ke,void 0,void 0,e)),o.a.createElement(fe,X({className:t.className,style:X({},t.style,{minWidth:Ie+"px"})},t.rest),o.a.createElement(ue,X({className:v()(n.className),style:n.style},n.rest),Se.map(tt)))):null),j&&_?o.a.createElement("div",{className:"pagination-bottom"},nt(!1)):null,!De.length&&o.a.createElement(ve,Ye,E.normalizeComponent(R)),o.a.createElement(he,X({loading:Y,loadingText:M},$e)));var t,n,i,s,u,f,g,y};return n?n(Ke,rt,this):rt()}}]),t}(function(e){return function(e){function t(){return M(this,t),R(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+N(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),z(t,[{key:"getResolvedState",value:function(e,t){return j({},E.compactObject(this.state),E.compactObject(this.props),E.compactObject(t),E.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,a=e.pivotBy,i=void 0===a?[]:a,s=e.data,l=e.resolveData,c=e.pivotIDKey,u=e.pivotValKey,p=e.subRowsKey,d=e.aggregatedKey,f=e.nestingLevelKey,m=e.originalKey,h=e.indexKey,g=e.groupedByPivotKey,v=e.SubComponent,y=!1;r.forEach((function(e){e.columns&&(y=!0)}));var b=[].concat(D(r)),x=r.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));x&&!x.expander&&(x=x.columns.find((function(e){return e.expander}))),v&&!x&&(b=[x={expander:!0}].concat(D(b)));var w=[],P=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?j({},n.props.column,n.props.expanderDefaults,e):j({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var o=r.accessor;return r.accessor=function(e){return E.get(e,o)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return w.push(r),r},C=b.map((function(e){return e.columns?j({},e,{columns:e.columns.map((function(t){return P(t,e)}))}):P(e)})).slice(),O=[],S=(C=(C=C.map((function(e){if(e.columns){var t=e.columns.filter((function(e){return!(i.indexOf(e.id)>-1)&&E.getFirstDefined(e.show,!0)}));return j({},e,{columns:t})}return e}))).filter((function(e){return e.columns?e.columns.length:!(i.indexOf(e.id)>-1)&&E.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));if(i.length){var k=[];i.forEach((function(e){var t=w.find((function(t){return t.id===e}));t&&k.push(t)}));var N=k.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),k[0].parentColumn),z=y&&N.Header,M={Header:z=z||function(){return o.a.createElement("strong",null,"Pivoted")},columns:k.map((function(e){return j({},n.props.pivotDefaults,e,{pivoted:!0})}))};S>=0?(M=j({},C[S],M),C.splice(S,1,M)):C.unshift(M)}var R=[],F=[],A=function(e,t){R.push(j({},n.props.column,t,{columns:e})),F=[]};C.forEach((function(e){if(e.columns)return O=O.concat(e.columns),F.length>0&&A(F),void A(e.columns,e);O.push(e),F.push(e)})),y&&F.length>0&&A(F);var H=this.resolvedData;this.resolvedData&&!t||(H=l(s),this.resolvedData=H),H=H.map((function(e,t){return function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(_(r={},m,t),_(r,h,n),_(r,p,t[p]),_(r,f,o),r);return w.forEach((function(e){e.expander||(a[e.id]=e.accessor(t))})),a[p]&&(a[p]=a[p].map((function(t,n){return e(t,n,o+1)}))),a}(e,t)}));var B=O.filter((function(e){return!e.expander&&e.aggregate})),W=function(e){var t={};return B.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t};if(i.length){H=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var o=Object.entries(E.groupBy(t,n[r])).map((function(e){var t,o=T(e,2),a=o[0],i=o[1];return _(t={},c,n[r]),_(t,u,a),_(t,n[r],a),_(t,p,i),_(t,f,r),_(t,g,!0),t}));return o=o.map((function(t){var o,a=e(t[p],n,r+1);return j({},t,(_(o={},p,a),_(o,d,!0),o),W(a))}))}(H,i)}return j({},e,{resolvedData:H,allVisibleColumns:O,headerGroups:R,allDecoratedColumns:w,hasHeaderGroups:y})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,o=e.defaultFilterMethod,a=e.resolvedData,i=e.allDecoratedColumns,s={};return i.filter((function(e){return e.sortMethod})).forEach((function(e){s[e.id]=e.sortMethod})),{sortedData:t?a:this.sortData(this.filterData(a,r,o,i),n,s)}}},{key:"fireFetchData",value:function(){var e=j({},this.getResolvedState(),{page:this.getStateOrProp("page"),pageSize:this.getStateOrProp("pageSize"),filtered:this.getStateOrProp("filtered")});this.props.onFetchData(e,this)}},{key:"getPropOrState",value:function(e){return E.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return E.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var o=this,a=e;return t.length&&(a=(a=t.reduce((function(e,t){var o=r.find((function(e){return e.id===t.id}));if(!o||!1===o.filterable)return e;var a=o.filterMethod||n;return o.filterAll?a(t,e,o):e.filter((function(e){return a(t,e,o)}))}),a)).map((function(e){return e[o.props.subRowsKey]?j({},e,_({},o.props.subRowsKey,o.filterData(e[o.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[o.props.subRowsKey]||e[o.props.subRowsKey].length>0}))),a}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var o=(this.props.orderByMethod||E.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return o.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),o}},{key:"getMinRows",value:function(){return E.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,o={page:e};r&&(o.expanded={}),this.setStateWithData(o,(function(){return n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,o=Math.floor(r/e);this.setStateWithData({pageSize:e,page:o},(function(){return t&&t(e,o)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,o=n.skipNextSort,a=n.defaultSortDesc,i=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:a,s=!i;if(o)this.setStateWithData({skipNextSort:!1});else{var l=this.props.onSortedChange,c=E.clone(r||[]).map((function(e){return e.desc=E.isSortingDesc(e),e}));if(E.isArray(e)){var u=c.findIndex((function(t){return t.id===e[0].id}));if(u>-1)c[u].desc===s?t?c.splice(u,e.length):e.forEach((function(e,t){c[u+t].desc=i})):e.forEach((function(e,t){c[u+t].desc=s})),t||(c=c.slice(u,e.length));else c=t?c.concat(e.map((function(e){return{id:e.id,desc:i}}))):e.map((function(e){return{id:e.id,desc:i}}))}else{var p=c.findIndex((function(t){return t.id===e.id}));if(p>-1){var d=c[p];d.desc===s?t?c.splice(p,1):(d.desc=i,c=[d]):(d.desc=s,t||(c=[d]))}else t?c.push({id:e.id,desc:i}):c=[{id:e.id,desc:i}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},(function(){return l&&l(c,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,o=(n||[]).filter((function(t){return t.id!==e.id}));""!==t&&o.push({id:e.id,value:t}),this.setStateWithData({filtered:o},(function(){return r&&r(o,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var o=e.target.parentElement.getBoundingClientRect().width,a=void 0;a=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:a,parentWidth:o}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props,n=t.onResizedChange,r=t.column,o=this.getResolvedState(),a=o.resized,i=o.currentlyResizing,s=o.columns.find((function(e){return e.accessor===i.id||e.id===i.id})),l=s&&null!=s.minResizeWidth?s.minResizeWidth:r.minResizeWidth,c=a.filter((function(e){return e.id!==i.id})),u=void 0;"touchmove"===e.type?u=e.changedTouches[0].pageX:"mousemove"===e.type&&(u=e.pageX);var p=Math.max(i.parentWidth+u-i.startX,l);c.push({id:i.id,value:p}),this.setStateWithData({resized:c},(function(){return n&&n(c,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(e)}(function(e){function t(){return S(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+C(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),O(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])})),["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",o="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[o]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),o=this.getResolvedState({},e),a=o.freezeWhenExpanded;if(o.frozen=!1,a)for(var i=Object.keys(o.expanded),s=0;s<i.length;s+=1)if(o.expanded[i[s]]){o.frozen=!0;break}return(r.frozen&&!o.frozen||r.sorted!==o.sorted||r.filtered!==o.filtered||r.showFilters!==o.showFilters||!o.frozen&&r.resolvedData!==o.resolvedData)&&((r.sorted!==o.sorted&&this.props.collapseOnSortingChange||r.filtered!==o.filtered||r.showFilters!==o.showFilters||r.sortedData&&!o.frozen&&r.resolvedData!==o.resolvedData&&this.props.collapseOnDataChange)&&(o.expanded={}),Object.assign(o,this.getSortedData(o))),r.filtered!==o.filtered&&(o.page=0),o.sortedData&&(o.pages=o.manual?o.pages:Math.ceil(o.sortedData.length/o.pageSize),o.page=o.manual?o.page:Math.max(o.page>=o.pages?o.pages-1:o.page,0)),this.setState(o,(function(){t&&t(),r.page===o.page&&r.pageSize===o.pageSize&&r.sorted===o.sorted&&r.filtered===o.filtered||n.fireFetchData()}))}}]),t}(r.Component)));Q.propTypes=$,Q.defaultProps=G;var ee=Q,te=n(11),ne=n.n(te),re=n(13),oe=n(7),ae=r.createContext(),ie=r.createContext();function se(e){var t=e.children,n=r.useState(null),o=n[0],a=n[1];return r.useEffect((function(){return function(){a(null)}}),[a]),r.createElement(ae.Provider,{value:o},r.createElement(ie.Provider,{value:a},t))}var le=n(46),ce=n.n(le),ue=function(e){return Array.isArray(e)?e[0]:e},pe=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},de=function(e,t){if("function"==typeof e)return pe(e,t);null!=e&&(e.current=t)},fe=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},me="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect;function he(e){var t=e.children,n=e.innerRef,o=r.useContext(ie),a=r.useCallback((function(e){de(n,e),pe(o,e)}),[n,o]);return r.useEffect((function(){return function(){return de(n,null)}})),r.useEffect((function(){ce()(Boolean(o),"`Reference` should not be used outside of a `Manager` component.")}),[o]),ue(t)({ref:a})}function ge(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function ve(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function ye(e){var t=ve(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function be(e){return e instanceof ve(e).Element||e instanceof Element}function Ee(e){return e instanceof ve(e).HTMLElement||e instanceof HTMLElement}function xe(e){return e?(e.nodeName||"").toLowerCase():null}function we(e){return(be(e)?e.ownerDocument:e.document).documentElement}function Pe(e){return ge(we(e)).left+ye(e).scrollLeft}function Ce(e){return ve(e).getComputedStyle(e)}function Oe(e){var t=Ce(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Se(e,t,n){void 0===n&&(n=!1);var r,o,a=we(t),i=ge(e),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return n||(("body"!==xe(t)||Oe(a))&&(s=(r=t)!==ve(r)&&Ee(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:ye(r)),Ee(t)?((l=ge(t)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=Pe(a))),{x:i.left+s.scrollLeft-l.x,y:i.top+s.scrollTop-l.y,width:i.width,height:i.height}}function ke(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function Ne(e){return"html"===xe(e)?e:e.assignedSlot||e.parentNode||e.host||we(e)}function Te(e,t){void 0===t&&(t=[]);var n=function e(t){return["html","body","#document"].indexOf(xe(t))>=0?t.ownerDocument.body:Ee(t)&&Oe(t)?t:e(Ne(t))}(e),r="body"===xe(n),o=ve(n),a=r?[o].concat(o.visualViewport||[],Oe(n)?n:[]):n,i=t.concat(a);return r?i:i.concat(Te(Ne(a)))}function je(e){return["table","td","th"].indexOf(xe(e))>=0}function ze(e){return Ee(e)&&"fixed"!==Ce(e).position?e.offsetParent:null}function _e(e){for(var t=ve(e),n=ze(e);n&&je(n);)n=ze(n);return n&&"body"===xe(n)&&"static"===Ce(n).position?t:n||t}var De="top",Me="bottom",Re="right",Fe="left",Ae=[De,Me,Re,Fe],He=Ae.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),Be=[].concat(Ae,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),We=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Le(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var o=t.get(r);o&&e(o)}})),r.push(o)}(e)})),r}var Ie={placement:"bottom",modifiers:[],strategy:"absolute"};function Ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Ke(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,a=void 0===o?Ie:o;return function(e,t,n){void 0===n&&(n=a);var o,i,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ie,{},a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){p(),s.options=Object.assign({},a,{},s.options,{},n),s.scrollParents={reference:be(e)?Te(e):e.contextElement?Te(e.contextElement):[],popper:Te(t)};var o=function(e){var t=Le(e);return We.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,s.options.modifiers)));return s.orderedModifiers=o.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var a=o({state:s,name:t,instance:u,options:r});l.push(a||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(Ue(t,n)){s.rects={reference:Se(t,_e(n),"fixed"===s.options.strategy),popper:ke(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var o=s.orderedModifiers[r],a=o.fn,i=o.options,l=void 0===i?{}:i,p=o.name;"function"==typeof a&&(s=a({state:s,options:l,name:p,instance:u})||s)}else s.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return i||(i=new Promise((function(e){Promise.resolve().then((function(){i=void 0,e(o())}))}))),i}),destroy:function(){p(),c=!0}};if(!Ue(e,t))return u;function p(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Ge={passive:!0};function qe(e){return e.split("-")[0]}function Ve(e){return e.split("-")[1]}function $e(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ye(e){var t,n=e.reference,r=e.element,o=e.placement,a=o?qe(o):null,i=o?Ve(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case De:t={x:s,y:n.y-r.height};break;case Me:t={x:s,y:n.y+n.height};break;case Re:t={x:n.x+n.width,y:l};break;case Fe:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?$e(a):null;if(null!=c){var u="y"===c?"height":"width";switch(i){case"start":t[c]=Math.floor(t[c])-Math.floor(n[u]/2-r[u]/2);break;case"end":t[c]=Math.floor(t[c])+Math.ceil(n[u]/2-r[u]/2)}}return t}var Je={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xe(e){var t,n=e.popper,r=e.popperRect,o=e.placement,a=e.offsets,i=e.position,s=e.gpuAcceleration,l=e.adaptive,c=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(a),u=c.x,p=c.y,d=a.hasOwnProperty("x"),f=a.hasOwnProperty("y"),m=Fe,h=De,g=window;if(l){var v=_e(n);v===ve(n)&&(v=we(n)),o===De&&(h=Me,p-=v.clientHeight-r.height,p*=s?1:-1),o===Fe&&(m=Re,u-=v.clientWidth-r.width,u*=s?1:-1)}var y,b=Object.assign({position:i},l&&Je);return s?Object.assign({},b,((y={})[h]=f?"0":"",y[m]=d?"0":"",y.transform=(g.devicePixelRatio||1)<2?"translate("+u+"px, "+p+"px)":"translate3d("+u+"px, "+p+"px, 0)",y)):Object.assign({},b,((t={})[h]=f?p+"px":"",t[m]=d?u+"px":"",t.transform="",t))}var Ze={left:"right",right:"left",bottom:"top",top:"bottom"};function Qe(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ze[e]}))}var et={start:"end",end:"start"};function tt(e){return e.replace(/start|end/g,(function(e){return et[e]}))}function nt(e){return parseFloat(e)||0}function rt(e){var t=ve(e),n=function(e){var t=Ee(e)?Ce(e):{};return{top:nt(t.borderTopWidth),right:nt(t.borderRightWidth),bottom:nt(t.borderBottomWidth),left:nt(t.borderLeftWidth)}}(e),r="html"===xe(e),o=Pe(e),a=e.clientWidth+n.right,i=e.clientHeight+n.bottom;return r&&t.innerHeight-e.clientHeight>50&&(i=t.innerHeight-n.bottom),{top:r?0:e.clientTop,right:e.clientLeft>n.left?n.right:r?t.innerWidth-a-o:e.offsetWidth-a,bottom:r?t.innerHeight-i:e.offsetHeight-i,left:r?o:e.clientLeft}}function ot(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function at(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function it(e,t){return"viewport"===t?at(function(e){var t=ve(e),n=t.visualViewport,r=t.innerWidth,o=t.innerHeight;return n&&/iPhone|iPod|iPad/.test(navigator.platform)&&(r=n.width,o=n.height),{width:r,height:o,x:0,y:0}}(e)):Ee(t)?ge(t):at(function(e){var t=ve(e),n=ye(e),r=Se(we(e),t);return r.height=Math.max(r.height,t.innerHeight),r.width=Math.max(r.width,t.innerWidth),r.x=-n.scrollLeft,r.y=-n.scrollTop,r}(we(e)))}function st(e,t,n){var r="clippingParents"===t?function(e){var t=Te(e),n=["absolute","fixed"].indexOf(Ce(e).position)>=0&&Ee(e)?_e(e):e;return be(n)?t.filter((function(e){return be(e)&&ot(e,n)})):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o[0],i=o.reduce((function(t,n){var r=it(e,n),o=rt(Ee(n)?n:we(e));return t.top=Math.max(r.top+o.top,t.top),t.right=Math.min(r.right-o.right,t.right),t.bottom=Math.min(r.bottom-o.bottom,t.bottom),t.left=Math.max(r.left+o.left,t.left),t}),it(e,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function lt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function ct(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ut(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,a=n.boundary,i=void 0===a?"clippingParents":a,s=n.rootBoundary,l=void 0===s?"viewport":s,c=n.elementContext,u=void 0===c?"popper":c,p=n.altBoundary,d=void 0!==p&&p,f=n.padding,m=void 0===f?0:f,h=lt("number"!=typeof m?m:ct(m,Ae)),g="popper"===u?"reference":"popper",v=e.elements.reference,y=e.rects.popper,b=e.elements[d?g:u],E=st(be(b)?b:b.contextElement||we(e.elements.popper),i,l),x=ge(v),w=Ye({reference:x,element:y,strategy:"absolute",placement:o}),P=at(Object.assign({},y,{},w)),C="popper"===u?P:x,O={top:E.top-C.top+h.top,bottom:C.bottom-E.bottom+h.bottom,left:E.left-C.left+h.left,right:C.right-E.right+h.right},S=e.modifiersData.offset;if("popper"===u&&S){var k=S[o];Object.keys(O).forEach((function(e){var t=[Re,Me].indexOf(e)>=0?1:-1,n=[De,Me].indexOf(e)>=0?"y":"x";O[e]+=k[n]*t}))}return O}function pt(e,t,n){return Math.max(e,Math.min(t,n))}function dt(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ft(e){return[De,Re,Me,Fe].some((function(t){return e[t]>=0}))}var mt=Ke({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,a=void 0===o||o,i=r.resize,s=void 0===i||i,l=ve(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,Ge)})),s&&l.addEventListener("resize",n.update,Ge),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Ge)})),s&&l.removeEventListener("resize",n.update,Ge)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Ye({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,a=n.adaptive,i=void 0===a||a,s={placement:qe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,{},Xe(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},Xe(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];Ee(o)&&xe(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Ee(r)&&xe(r)&&(Object.assign(r.style,a),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,a=void 0===o?[0,0]:o,i=Be.reduce((function(e,n){return e[n]=function(e,t,n){var r=qe(e),o=[Fe,De].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],s=a[1];return i=i||0,s=(s||0)*o,[Fe,Re].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}(n,t.rects,a),e}),{}),s=i[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=i}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,a=void 0===o||o,i=n.altAxis,s=void 0===i||i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,p=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,m=void 0===f||f,h=n.allowedAutoPlacements,g=t.options.placement,v=qe(g),y=l||(v===g||!m?[Qe(g)]:function(e){if("auto"===qe(e))return[];var t=Qe(e);return[tt(e),t,tt(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat("auto"===qe(n)?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,a=n.rootBoundary,i=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Be:l,u=Ve(r),p=(u?s?He:He.filter((function(e){return Ve(e)===u})):Ae).filter((function(e){return c.indexOf(e)>=0})).reduce((function(t,n){return t[n]=ut(e,{placement:n,boundary:o,rootBoundary:a,padding:i})[qe(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:p,padding:c,flipVariations:m,allowedAutoPlacements:h}):n)}),[]),E=t.rects.reference,x=t.rects.popper,w=new Map,P=!0,C=b[0],O=0;O<b.length;O++){var S=b[O],k=qe(S),N="start"===Ve(S),T=[De,Me].indexOf(k)>=0,j=T?"width":"height",z=ut(t,{placement:S,boundary:u,rootBoundary:p,altBoundary:d,padding:c}),_=T?N?Re:Fe:N?Me:De;E[j]>x[j]&&(_=Qe(_));var D=Qe(_),M=[];if(a&&M.push(z[k]<=0),s&&M.push(z[_]<=0,z[D]<=0),M.every((function(e){return e}))){C=S,P=!1;break}w.set(S,M)}if(P)for(var R=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},F=m?3:1;F>0;F--){if("break"===R(F))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,a=void 0===o||o,i=n.altAxis,s=void 0!==i&&i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,p=n.padding,d=n.tether,f=void 0===d||d,m=n.tetherOffset,h=void 0===m?0:m,g=ut(t,{boundary:l,rootBoundary:c,padding:p,altBoundary:u}),v=qe(t.placement),y=Ve(t.placement),b=!y,E=$e(v),x="x"===E?"y":"x",w=t.modifiersData.popperOffsets,P=t.rects.reference,C=t.rects.popper,O="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,S={x:0,y:0};if(w){if(a){var k="y"===E?De:Fe,N="y"===E?Me:Re,T="y"===E?"height":"width",j=w[E],z=w[E]+g[k],_=w[E]-g[N],D=f?-C[T]/2:0,M="start"===y?P[T]:C[T],R="start"===y?-C[T]:-P[T],F=t.elements.arrow,A=f&&F?ke(F):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=H[k],W=H[N],L=pt(0,P[T],A[T]),I=b?P[T]/2-D-L-B-O:M-L-B-O,U=b?-P[T]/2+D+L+W+O:R+L+W+O,K=t.elements.arrow&&_e(t.elements.arrow),G=K?"y"===E?K.clientTop||0:K.clientLeft||0:0,q=t.modifiersData.offset?t.modifiersData.offset[t.placement][E]:0,V=w[E]+I-q-G,$=w[E]+U-q,Y=pt(f?Math.min(z,V):z,j,f?Math.max(_,$):_);w[E]=Y,S[E]=Y-j}if(s){var J="x"===E?De:Fe,X="x"===E?Me:Re,Z=w[x],Q=pt(Z+g[J],Z,Z-g[X]);w[x]=Q,S[x]=Q-Z}t.modifiersData[r]=S}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=n.elements.arrow,a=n.modifiersData.popperOffsets,i=qe(n.placement),s=$e(i),l=[Fe,Re].indexOf(i)>=0?"height":"width";if(o&&a){var c=n.modifiersData[r+"#persistent"].padding,u=ke(o),p="y"===s?De:Fe,d="y"===s?Me:Re,f=n.rects.reference[l]+n.rects.reference[s]-a[s]-n.rects.popper[l],m=a[s]-n.rects.reference[s],h=_e(o),g=h?"y"===s?h.clientHeight||0:h.clientWidth||0:0,v=f/2-m/2,y=c[p],b=g-u[l]-c[d],E=g/2-u[l]/2+v,x=pt(y,E,b),w=s;n.modifiersData[r]=((t={})[w]=x,t.centerOffset=x-E,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,o=n.element,a=void 0===o?"[data-popper-arrow]":o,i=n.padding,s=void 0===i?0:i;null!=a&&("string"!=typeof a||(a=t.elements.popper.querySelector(a)))&&ot(t.elements.popper,a)&&(t.elements.arrow=a,t.modifiersData[r+"#persistent"]={padding:lt("number"!=typeof s?s:ct(s,Ae))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,i=ut(t,{elementContext:"reference"}),s=ut(t,{altBoundary:!0}),l=dt(i,r),c=dt(s,o,a),u=ft(l),p=ft(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}}]}),ht=n(47),gt=n.n(ht),vt=[],yt=function(){},bt=function(){return Promise.resolve(null)},Et=[];function xt(e){var t=e.placement,n=void 0===t?"bottom":t,o=e.strategy,a=void 0===o?"absolute":o,i=e.modifiers,s=void 0===i?Et:i,l=e.referenceElement,c=e.onFirstUpdate,u=e.innerRef,p=e.children,d=r.useContext(ae),f=r.useState(null),m=f[0],h=f[1],g=r.useState(null),v=g[0],y=g[1];r.useEffect((function(){return de(u,m)}),[u,m]);var b=r.useMemo((function(){return{placement:n,strategy:a,onFirstUpdate:c,modifiers:[].concat(s,[{name:"arrow",enabled:null!=v,options:{element:v}}])}}),[n,a,c,s,v]),E=function(e,t,n){void 0===n&&(n={});var o=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||vt},i=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"}},attributes:{}}),s=i[0],l=i[1],c=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);l({styles:fe(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:fe(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),u=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[c,{name:"applyStyles",enabled:!1}])};return gt()(o.current,e)?o.current||e:(o.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,c]),p=r.useRef();return me((function(){p.current&&p.current.setOptions(u)}),[u]),me((function(){if(null!=e&&null!=t){var r=(n.createPopper||mt)(e,t,u);return p.current=r,function(){r.destroy(),p.current=null}}}),[e,t,n.createPopper]),{state:p.current?p.current.state:null,styles:s.styles,attributes:s.attributes,update:p.current?p.current.update:null,forceUpdate:p.current?p.current.forceUpdate:null}}(l||d,m,b),x=E.state,w=E.styles,P=E.forceUpdate,C=E.update,O=r.useMemo((function(){return{ref:h,style:w.popper,placement:x?x.placement:n,hasPopperEscaped:x&&x.modifiersData.hide?x.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:x&&x.modifiersData.hide?x.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:w.arrow,ref:y},forceUpdate:P||yt,update:C||bt}}),[h,y,n,x,w,C,P]);return ue(p)(O)}var wt=!1,Pt=o.a.createContext(null),Ct=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var o,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o="exited",r.appearStatus="entering"):o="entered":o=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:o},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var a=r.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.a.findDOMNode(this);"entering"===t?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},a.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context?this.context.isMounting:t,a=this.getTimeouts(),i=o?a.appear:a.enter;!t&&!r||wt?this.safeSetState({status:"entered"},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,o),this.safeSetState({status:"entering"},(function(){n.props.onEntering(e,o),n.onTransitionEnd(e,i,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(e,o)}))}))})))},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n&&!wt?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return o.a.createElement(Pt.Provider,{value:null},n(e,r));var a=o.a.Children.only(n);return o.a.createElement(Pt.Provider,{value:null},o.a.cloneElement(a,r))},r}(o.a.Component);function Ot(){}Ct.contextType=Pt,Ct.propTypes={},Ct.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ot,onEntering:Ot,onEntered:Ot,onExit:Ot,onExiting:Ot,onExited:Ot},Ct.UNMOUNTED=0,Ct.EXITED=1,Ct.ENTERING=2,Ct.ENTERED=3,Ct.EXITING=4;var St,kt,Nt,Tt=Ct,jt=n(5),zt=(St=function(e,t){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}St(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_t=function(e){function t(t){var n=e.call(this,t)||this,r=n.props,o=r.className,a=r.root,i=void 0===a?document.body:a;return n.node=document.createElement("div"),o&&n.node.classList.add(o),n.portalRoot=i,n.portalRoot.appendChild(n.node),n}return zt(t,e),t.prototype.componentWillUnmount=function(){this.portalRoot.removeChild(this.node)},t.prototype.render=function(){return i.a.createPortal(this.props.children,this.node)},t}(r.PureComponent),Dt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Mt=function(){return(Mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Rt=Object(jt.stylesFactory)((function(){return{defaultTransitionStyles:Object(oe.css)(kt||(kt=Dt(["\n    transition: opacity 200ms linear;\n    opacity: 0;\n  "],["\n    transition: opacity 200ms linear;\n    opacity: 0;\n  "]))),tooltipContent:Object(oe.css)(Nt||(Nt=Dt(["\n    overflow-wrap: break-word;\n  "],["\n    overflow-wrap: break-word;\n  "])))}})),Ft={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0}},At=function(e){var t=e.show,n=e.placement,r=e.popperClassName,a=e.refClassName,i=e.content,s=e.children,l=e.renderContent,c=Object(oe.cx)("popper_ref",a),u=Rt(),p=Object(oe.cx)("popper",r,u.defaultTransitionStyles);return o.a.createElement(se,null,o.a.createElement(he,null,(function(e){var t=e.ref;return o.a.createElement("div",{className:c,ref:t},s)})),o.a.createElement(Tt,{in:t,timeout:100,mountOnEnter:!0,unmountOnExit:!0},(function(e){return o.a.createElement(_t,null,o.a.createElement(xt,{placement:n},(function(t){var n=t.ref,r=t.style,a=t.placement,s=t.arrowProps;return o.a.createElement("div",{ref:n,style:Mt(Mt({},r),Ft[e]),"data-placement":a,className:p},o.a.createElement("div",{className:"popper__background"},o.a.createElement("div",{className:u.tooltipContent},l(i)),o.a.createElement("div",{ref:s.ref,"data-placement":a,className:"popper__arrow"})))})))})))},Ht=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(){return(Bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Wt=function(){return(Wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Lt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},It=function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.showPopper=function(){n.setState({show:!0})},n.hidePopper=function(){n.setState({show:!1})},n.state={show:!1},n}return Ht(n,t),n.prototype.renderContent=function(e){if("function"==typeof e){var t=e;return o.a.createElement(t,null)}return e},n.prototype.render=function(){var t=this.state.show,n=this.props,r=n.placement,a=n.className;return o.a.createElement(e,Bt({},this.props,{showPopper:this.showPopper,hidePopper:this.hidePopper,renderContent:this.renderContent,placement:r,className:a,show:t}))},n}(o.a.Component)).defaultProps={placement:"auto"},t}((function(e){var t=e.hidePopper,n=e.showPopper,r=e.className,a=e.children,i=Lt(e,["hidePopper","showPopper","className","children"]);return o.a.createElement("div",{className:"popper__manager "+r,onMouseEnter:n,onMouseLeave:t},o.a.createElement(At,Wt({},i),a))})),Ut=It,Kt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=["#E24D42","#1F78C1","#BA43A9","#705DA0","#466803","#508642","#447EBC","#C15C17","#890F02","#757575","#0A437C","#6D1F62","#584477","#629E51","#2F4F4F","#BF1B00","#806EB7","#8a2eb8","#699e00","#000000","#3F6833","#2F575E","#99440A","#E0752D","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],qt=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];var Vt,$t,Yt,Jt,Xt,Zt,Qt,en,tn,nn,rn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick&&t.props.onClick(t.props.tag,e.ctrlKey,e.shiftKey)},t}return Kt(t,e),t.prototype.render=function(){var e=this.props,t=e.tag,n=e.highlight,r=function(e){var t=function(e){for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}(e.toLowerCase());return{color:Gt[Math.abs(t%Gt.length)],borderColor:qt[Math.abs(t%qt.length)]}}(t.tag),a={background:r.color,borderColor:r.borderColor};return o.a.createElement(Ut,{placement:"bottom",content:"Click to add tag filter or Ctrl/Shift+click to remove"},o.a.createElement("span",{className:"label label-tag zbx-tag "+(n?"highlighted":""),style:a,onClick:this.handleClick},t.value?t.tag+": "+t.value:""+t.tag))},t}(r.PureComponent),on=n(3),an=n(4),sn=function(e){var t=e.status,n=e.className,r=Object(oe.cx)(n,"icon-gf",{"icon-gf-critical":"critical"===t||"problem"===t||"warning"===t},{"icon-gf-online":"online"===t||"ok"===t});return o.a.createElement("i",{className:r})},ln=function(e){var t=e.icon,n=e.customClass,r=Object(oe.cx)(n,"fa-icon-container");return o.a.createElement("span",{className:r},o.a.createElement("i",{className:"fa fa-"+t}))},cn=ln,un=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},pn=function(e){var t=e.icon,n=e.width,r=e.tooltip,a=e.className,i=e.children,s=e.onClick,l=Object(jt.useTheme)(),c=dn(l),u=Object(oe.cx)("btn",c.button,Object(oe.css)(Vt||(Vt=un(["width: ","rem"],["width: ","rem"])),n||3),a),p=o.a.createElement("button",{className:u,onClick:s},t&&o.a.createElement(ln,{icon:t,customClass:c.icon}),i);return r&&(p=o.a.createElement(It,{placement:"bottom",content:r},p)),p},dn=Object(jt.stylesFactory)((function(e){var t=e.type===u.GrafanaThemeType.Light?"#497dc0":"#005f81",n=e.type===u.GrafanaThemeType.Light?"#456ba4":"#354f77";return{button:Object(oe.css)($t||($t=un(["\n      height: 2rem;\n      background-image: none;\n      background-color: ",";\n      border: 1px solid ",";\n      border-radius: 1px;\n      color: ",";\n\n      i {\n        vertical-align: middle;\n      }\n\n      &:hover {\n        background-color: ",";\n      }\n    "],["\n      height: 2rem;\n      background-image: none;\n      background-color: ",";\n      border: 1px solid ",";\n      border-radius: 1px;\n      color: ",";\n\n      i {\n        vertical-align: middle;\n      }\n\n      &:hover {\n        background-color: ",";\n      }\n    "])),t,e.palette.gray1,e.colors.text,n),icon:Object(oe.css)(Yt||(Yt=un(["\n      i {\n        color: ",";\n      }\n    "],["\n      i {\n        color: ",";\n      }\n    "])),e.colors.text)}})),fn=function(e){var t=e.className,n=e.onClick;return o.a.createElement(pn,{className:t,icon:"reply-all",tooltip:"Acknowledge problem",onClick:n})},mn=function(e){var t=e.problem,n=e.panelId;return o.a.createElement(pn,{icon:"compass",width:6,onClick:function(){return hn(t,n)}},"Explore")},hn=function(e,t){var n,r,o,a={};if(1===(null===(n=e.items)||void 0===n?void 0:n.length)&&1===(null===(r=e.hosts)||void 0===r?void 0:r.length)){var i=e.items[0],s=e.hosts[0],l=Object(on.f)(i.name,i.key_);a={queryType:an.g,group:{filter:"/.*/"},application:{filter:""},host:{filter:s.name},item:{filter:l}}}else{var u=null===(o=e.items)||void 0===o?void 0:o.map((function(e){return e.itemid})).join(",");a={queryType:an.e,itemids:u}}var p={datasource:e.datasource,context:"explore",originPanelId:t,queries:[a]},d=JSON.stringify(p),f=Object(re.d)("/explore",{left:d});Object(c.getLocationSrv)().update({path:f,query:{}})},gn=function(e){var t=e.className,n=e.onClick;return o.a.createElement(pn,{className:t,icon:"terminal",tooltip:"Execute script",onClick:n})},vn=function(){return(vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},yn=o.a.createContext(c.config),bn=yn.Consumer,En=function(){return Object(jt.getTheme)(c.config.bootData.user.lightTheme?u.GrafanaThemeType.Light:u.GrafanaThemeType.Dark)},xn=function(e){var t=e.children;return o.a.createElement(bn,null,(function(e){return o.a.createElement(jt.ThemeContext.Provider,{value:En()},t)}))},wn=function(e){return function(e){return function(t){return o.a.createElement(yn.Provider,{value:c.config},o.a.createElement(e,vn({},t)))}}((function(t){return o.a.createElement(xn,null,o.a.createElement(e,vn({},t)))}))},Pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cn=function(e){function t(t){var n=e.call(this,t)||this;return n.modalRoot=document.body,n.modalNode=document.createElement("div"),n.showModal=function(e,t){n.setState({component:e,props:t})},n.hideModal=function(){n.modalRoot.removeChild(n.modalNode),n.setState({component:null,props:{}})},n.state={component:null,props:{}},n}return Pn(t,e),t.prototype.renderModal=function(){var e=this.state,t=e.component,n=e.props;if(!t)return null;this.modalRoot.appendChild(this.modalNode);var r=o.a.createElement(wn(t),n);return i.a.createPortal(r,this.modalNode)},t.prototype.render=function(){var e=this.props.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement(e,{showModal:this.showModal,hideModal:this.hideModal}),this.renderModal())},t}(o.a.Component),On=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},kn=[{value:0,label:"Not classified"},{value:1,label:"Information"},{value:2,label:"Warning"},{value:3,label:"Average"},{value:4,label:"High"},{value:5,label:"Disaster"}],Nn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({value:e.target.value,error:!1})},n.handleKeyPress=function(e){13===e.which||"Enter"===e.key||27!==e.which&&"Escape"!==e.key||n.dismiss()},n.handleBackdropClick=function(){n.dismiss()},n.onAcknowledgeToggle=function(){n.setState({acknowledge:!n.state.acknowledge,error:!1})},n.onChangeSeverityToggle=function(){n.setState({changeSeverity:!n.state.changeSeverity,error:!1})},n.onCloseProblemToggle=function(){n.setState({closeProblem:!n.state.closeProblem,error:!1})},n.onChangeSelectedSeverity=function(e){n.setState({selectedSeverity:e})},n.dismiss=function(){n.setState({value:"",error:!1,errorMessage:"",ackError:"",loading:!1}),n.props.onDismiss()},n.submit=function(){var e=n.state,t=e.acknowledge,r=e.changeSeverity,o=e.closeProblem,a=t||r||o;if(!n.state.value&&!a)return n.setState({error:!0,errorMessage:"Enter message text or select an action"});n.setState({ackError:"",loading:!0});var i={message:n.state.value},s=an.o;n.state.acknowledge&&(s+=an.n),n.state.changeSeverity&&(s+=an.p,i.severity=n.state.selectedSeverity),n.state.closeProblem&&(s+=an.q),i.action=s,n.props.onSubmit(i).then((function(){n.dismiss()})).catch((function(e){var t,r,o=(null===(t=e.data)||void 0===t?void 0:t.message)||(null===(r=e.data)||void 0===r?void 0:r.error)||e.data||e.statusText||"";n.setState({ackError:o,loading:!1})}))},n.state={value:"",error:!1,errorMessage:"",ackError:"",acknowledge:!1,closeProblem:!1,changeSeverity:!1,selectedSeverity:t.severity||0,loading:!1},n}return On(t,e),t.prototype.renderActions=function(){var e=this.props.canClose;return[o.a.createElement(jt.Checkbox,{key:"ack",label:"Acknowledge",value:this.state.acknowledge,onChange:this.onAcknowledgeToggle}),o.a.createElement(jt.Checkbox,{key:"change-severity",label:"Change severity",description:"",value:this.state.changeSeverity,onChange:this.onChangeSeverityToggle}),this.state.changeSeverity&&o.a.createElement(jt.RadioButtonGroup,{key:"severity",size:"sm",options:kn,value:this.state.selectedSeverity,onChange:this.onChangeSelectedSeverity}),e&&o.a.createElement(jt.Checkbox,{key:"close",label:"Close problem",disabled:!e,value:this.state.closeProblem,onChange:this.onCloseProblemToggle})].filter((function(e){return e}))},t.prototype.render=function(){var e=this.props.theme,t=Tn(e),n=Object(oe.cx)(t.modal),r=Object(oe.cx)(t.modalHeaderTitle),a=Object(oe.cx)("gf-form",t.inputGroup),i=Object(oe.cx)(this.state.error&&t.input),s=Object(oe.cx)("gf-form-hint-text",t.inputHint),l=Object(oe.cx)("gf-form-hint-text",t.inputError);return o.a.createElement(jt.Modal,{isOpen:!0,onDismiss:this.dismiss,className:n,title:o.a.createElement("div",{className:r},this.state.loading?o.a.createElement(jt.Spinner,{size:18}):o.a.createElement(ln,{icon:"reply-all"}),o.a.createElement("span",{className:"p-l-1"},"Acknowledge Problem"))},o.a.createElement("div",{className:a},o.a.createElement("label",{className:"gf-form-hint"},o.a.createElement(jt.TextArea,{className:i,type:"text",name:"message",placeholder:"Message",autoComplete:"off",autoFocus:!0,value:this.state.value,onChange:this.handleChange,onKeyDown:this.handleKeyPress}),o.a.createElement("small",{className:s},"Press Enter to submit"),this.state.error&&o.a.createElement("small",{className:l},this.state.errorMessage))),o.a.createElement("div",{className:"gf-form"},o.a.createElement(jt.VerticalGroup,null,this.renderActions())),this.state.ackError&&o.a.createElement("div",{className:"gf-form ack-request-error"},o.a.createElement("span",{className:t.ackError},this.state.ackError)),o.a.createElement("div",{className:"gf-form-button-row text-center"},o.a.createElement(jt.Button,{variant:"primary",onClick:this.submit},"Update"),o.a.createElement(jt.Button,{variant:"secondary",onClick:this.dismiss},"Cancel")))},t.defaultProps={withBackdrop:!0},t}(r.PureComponent),Tn=Object(jt.stylesFactory)((function(e){var t=e.palette.red;return{modal:Object(oe.css)(Jt||(Jt=Sn(["\n      width: 500px;\n    "],["\n      width: 500px;\n    "]))),modalHeaderTitle:Object(oe.css)(Xt||(Xt=Sn(["\n      font-size: ",";\n      padding-top: ",";\n      margin: 0 ",";\n      display: flex;\n    "],["\n      font-size: ",";\n      padding-top: ",";\n      margin: 0 ",";\n      display: flex;\n    "])),e.typography.heading.h3,e.spacing.sm,e.spacing.md),inputGroup:Object(oe.css)(Zt||(Zt=Sn(["\n      margin-bottom: 16px;\n    "],["\n      margin-bottom: 16px;\n    "]))),input:Object(oe.css)(Qt||(Qt=Sn(["\n      border-color: ",";\n      border-radius: 2px;\n      outline-offset: 2px;\n      box-shadow: 0 0 0 2px ",", 0 0 0px 4px ",";\n    "],["\n      border-color: ",";\n      border-radius: 2px;\n      outline-offset: 2px;\n      box-shadow: 0 0 0 2px ",", 0 0 0px 4px ",";\n    "])),t,e.colors.bg1,t),inputHint:Object(oe.css)(en||(en=Sn(["\n      display: inherit;\n      float: right;\n      color: ",";\n    "],["\n      display: inherit;\n      float: right;\n      color: ",";\n    "])),e.colors.textWeak),inputError:Object(oe.css)(tn||(tn=Sn(["\n      float: left;\n      color: ",";\n    "],["\n      float: left;\n      color: ",";\n    "])),t),ackError:Object(oe.css)(nn||(nn=Sn(["\n      color: ",";\n    "],["\n      color: ",";\n    "])),t)}})),jn=Object(jt.withTheme)(Nn);function zn(e){var t=e.problem,n=e.alerts,r=e.className,a="1"===t.type,i=t.url&&""!==t.url,s=t.maintenance,l="1"===t.manual_close,c=t.error&&""!==t.error,u="1"===t.state,p="1"===t.correlation_mode,d=n&&0!==n.length,f=d?n[0].message:"";return o.a.createElement("div",{className:"problem-statusbar "+(r||"")},o.a.createElement(_n,{icon:"wrench",fired:s,tooltip:"Host maintenance"}),o.a.createElement(_n,{icon:"globe",fired:i,link:i&&t.url,tooltip:"External link"}),o.a.createElement(_n,{icon:"bullhorn",fired:a,tooltip:"Trigger generates multiple problem events"}),o.a.createElement(_n,{icon:"tag",fired:p,tooltip:"OK event closes problems matched to tag: "+t.correlation_tag}),o.a.createElement(_n,{icon:"circle-o-notch",fired:d,tooltip:f}),o.a.createElement(_n,{icon:"question-circle",fired:u,tooltip:"Current trigger state is unknown"}),o.a.createElement(_n,{icon:"warning",fired:c,tooltip:t.error}),o.a.createElement(_n,{icon:"window-close-o",fired:l,tooltip:"Manual close problem"}))}function _n(e){var t=e.fired,n=e.icon,r=e.link,a=e.tooltip,i=o.a.createElement("div",{className:"problem-statusbar-item "+(t?"fired":"muted")},o.a.createElement(cn,{icon:n}));return a&&t&&(i=o.a.createElement(Ut,{placement:"bottom",content:a},i)),r?o.a.createElement("a",{href:r,target:"_blank"},i):i}function Dn(e){var t=e.acknowledges;return o.a.createElement("div",{className:"problem-ack-list"},o.a.createElement("div",{className:"problem-ack-col problem-ack-time"},t.map((function(e){return o.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-time"},e.time)}))),o.a.createElement("div",{className:"problem-ack-col problem-ack-user"},t.map((function(e){return o.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-user"},e.user)}))),o.a.createElement("div",{className:"problem-ack-col problem-ack-message"},t.map((function(e){return o.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-message"},e.message)}))))}var Mn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rn=function(){return(Rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Fn=Math.round(9.6),An=function(e){function t(t){var n=e.call(this,t)||this;return n.setRootRef=function(e){n.rootRef=e;var t=e&&e.clientWidth||0;n.setState({width:t})},n.handlePointHighlight=function(e,t){var r,o=n.sortedEvents[e],a=n.getRegionToHighlight(e);void 0!==t&&(r=n.getEventDuration(e,t)),n.setState({highlightedEvent:o,showEventInfo:!0,highlightedRegion:a,eventInfo:{duration:r}})},n.handlePointUnHighlight=function(){n.setState({showEventInfo:!1,highlightedRegion:null})},n.handleAckHighlight=function(e,t){n.setState({showEventInfo:!0,eventInfo:{timestamp:Number(e.clock),message:e.message}})},n.handleAckUnHighlight=function(){n.setState({showEventInfo:!1})},n.showEventInfo=function(e){n.setState({highlightedEvent:e,showEventInfo:!0})},n.hideEventInfo=function(){n.setState({showEventInfo:!1})},n.getRegionToHighlight=function(e){return"1"===n.sortedEvents[e].value?e+1:e},n.state={width:0,highlightedEvent:null,highlightedRegion:null,showEventInfo:!1,eventInfo:{}},n}return Mn(t,e),t.prototype.componentDidUpdate=function(e,t){if(this.rootRef&&t.width!==this.rootRef.clientWidth){var n=this.rootRef.clientWidth;this.setState({width:n})}},t.prototype.getEventDuration=function(e,t){return 1e3*Math.abs(Number(this.sortedEvents[e].clock)-Number(this.sortedEvents[t].clock))},t.prototype.sortEvents=function(){var e=l.a.sortBy(this.props.events,(function(e){return Number(e.clock)}));return this.sortedEvents=e,e},t.prototype.getEventAcks=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];if(o.acknowledges)for(var a=0,i=o.acknowledges;a<i.length;a++){var s=i[a];t.push(s)}}return l.a.sortBy(t,(function(e){return Number(e.clock)}))},t.prototype.render=function(){if(!this.rootRef)return o.a.createElement("div",{className:"event-timeline",ref:this.setRootRef});var e=this.props,t=e.timeRange,n=e.eventPointSize,r=e.eventRegionHeight,a=this.sortEvents(),i=this.getEventAcks(a),s=this.state.width+n,l=Math.round(2.5*n),c=s-n,u=Math.round(n/2),p=r/2,d=Math.round(l/2-n/2);return o.a.createElement("div",{className:"event-timeline",ref:this.setRootRef,style:{transform:"translate("+-u+"px, 0)"}},o.a.createElement(Bn,{className:"timeline-info-container",event:this.state.highlightedEvent,eventInfo:this.state.eventInfo,show:this.state.showEventInfo,left:u}),o.a.createElement("svg",{className:"event-timeline-canvas",viewBox:"0 0 "+s+" "+l},o.a.createElement("defs",null,o.a.createElement(Hn,null)),o.a.createElement("g",{className:"event-timeline-group",transform:"translate("+u+", "+d+")"},o.a.createElement("g",{className:"event-timeline-regions",filter:"url(#boxShadow)"},o.a.createElement(Wn,{events:a,timeRange:t,width:c,height:r,highlightedRegion:this.state.highlightedRegion})),o.a.createElement("g",{className:"timeline-acknowledges",transform:"translate(0, "+p+")"},o.a.createElement(Un,{acknowledges:i,timeRange:t,width:c,size:n,onHighlight:this.handleAckHighlight,onUnHighlight:this.handleAckUnHighlight})),o.a.createElement("g",{className:"timeline-points",transform:"translate(0, "+p+")"},o.a.createElement(Ln,{events:a,timeRange:t,width:c,pointSize:n,onPointHighlight:this.handlePointHighlight,onPointUnHighlight:this.handlePointUnHighlight})))))},t.defaultProps={okColor:"rgb(56, 189, 113)",problemColor:"rgb(215, 0, 0)",eventRegionHeight:Fn,eventPointSize:16},t}(r.PureComponent);function Hn(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("filter",{id:"dropShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),o.a.createElement("feOffset",{dx:"1",dy:"1"}),o.a.createElement("feMerge",null,o.a.createElement("feMergeNode",null),o.a.createElement("feMergeNode",{in:"SourceGraphic"}))),o.a.createElement("filter",{id:"boxShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1"}),o.a.createElement("feComponentTransfer",null,o.a.createElement("feFuncA",{type:"linear",slope:"0.7"})),o.a.createElement("feOffset",{dx:"1",dy:"1"}),o.a.createElement("feMerge",null,o.a.createElement("feMergeNode",null),o.a.createElement("feMergeNode",{in:"SourceGraphic"}))),o.a.createElement("filter",{id:"glowShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"}),o.a.createElement("feMerge",null,o.a.createElement("feMergeNode",null),o.a.createElement("feMergeNode",{in:"SourceGraphic"}))),o.a.createElement("filter",{id:"timelinePointBlur",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2",result:"blurOut"})))}var Bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mn(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.event,a=n.eventInfo,i=n.show,s=n.className,l=n.left;if(r){var c=ne()(1e3*Number(r.clock)).format("HH:mm:ss");e=[o.a.createElement("span",{key:"ts",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Time: "),o.a.createElement("span",{className:"event-timestamp-value"},c))]}if(a&&a.duration){var u=a.duration,p=ne.a.utc(u).format("HH:mm:ss");t=o.a.createElement("span",{key:"duration",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Duration: "),o.a.createElement("span",{className:"event-timestamp-value"},p))}if(a&&a.timestamp){c=ne()(1e3*a.timestamp).format("HH:mm:ss");e=[o.a.createElement("span",{key:"ts",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Time: "),o.a.createElement("span",{className:"event-timestamp-value"},c))]}var d={left:l};return i||(d.opacity=0),o.a.createElement("div",{className:s,style:d},o.a.createElement("div",null,e),o.a.createElement("div",null,t),a&&a.message&&o.a.createElement("div",null,o.a.createElement("span",{key:"duration",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Message: "),o.a.createElement("span",{className:"event-timestamp-value"},a.message))))},t.defaultProps={left:0,className:"",show:!1},t}(r.PureComponent),Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mn(t,e),t.prototype.render=function(){var e,t=this.props,n=t.events,r=t.timeRange,a=t.width,i=t.height,s=t.highlightedRegion,l=r.timeFrom,c=r.timeTo,u=c-l;if(n.length){var p=((n.length?Number(n[0].clock):c)-l)/u,d=Math.round(p*a),f=0===s,m="problem-event-region "+("problem-event--"+("1"!==n[0].value?"problem":"ok"))+" "+(f?"highlighted":""),h={x:0,y:0,width:d,height:i};e=o.a.createElement("rect",Rn({key:"0",className:m},h))}return[e,n.map((function(e,t){var r=Number(e.clock),p=((t<n.length-1?Number(n[t+1].clock):c)-r)/u,d=Math.round(p*a),f=Math.round((r-l)/u*a),m=s&&s-1===t,h="problem-event-region "+("problem-event--"+("1"===e.value?"problem":"ok"))+" "+(m?"highlighted":""),g={x:f,y:0,width:d,height:i};return o.a.createElement("rect",Rn({key:e.eventid+"-"+t,className:h},g))}))]},t.defaultProps={highlightedRegion:null},t}(r.PureComponent),Ln=function(e){function t(t){var n=e.call(this,t)||this;return n.bringToFront=function(e,t){void 0===t&&(t=!1);var r=n.props.events.map((function(e,t){return t}));r=Gn(r,e);var o=t?e:null;n.setState({order:r,highlighted:o})},n.highlightPoint=function(e){return function(){var t=[e];if(n.props.onPointHighlight)if(n.props.highlightRegion){var r=2===(t=n.getRegionEvents(e)).length?t[1]:void 0;n.props.onPointHighlight(e,r)}else n.props.onPointHighlight(e);n.bringToFront(t,!0)}},n.unHighlightPoint=function(e){return function(){n.props.onPointUnHighlight&&n.props.onPointUnHighlight();var e=n.props.events.map((function(e,t){return t}));n.setState({order:e,highlighted:[]})}},n.state={order:[],highlighted:[]},n}return Mn(t,e),t.prototype.getRegionEvents=function(e){var t=this.props.events,n=t[e];if("1"===n.value&&e<t.length)for(var r=e;r<t.length;r++){if("0"===t[r].value)return[e,r]}else if("0"===n.value&&e>0){var o=null;for(r=e-1;r>=0&&"1"===t[r].value;r--)o=r;if(null!==o)return[e,o]}return[e]},t.prototype.render=function(){var e=this,t=this.props,n=t.events,r=t.timeRange,a=t.width,i=t.pointSize,s=r.timeFrom,l=r.timeTo-s,c=i/2,u=n.map((function(t,n){var r=Number(t.clock),i=Math.round((r-s)/l*a-c),u="problem-event-item problem-event--"+("1"===t.value?"problem":"ok"),p=-1!==e.state.highlighted.indexOf(n);return o.a.createElement(In,{key:t.eventid+"-"+n,className:u,x:i,r:c,highlighted:p,onPointHighlight:e.highlightPoint(n),onPointUnHighlight:e.unHighlightPoint(n)})}));return this.state.order.length?this.state.order.map((function(e){return u[e]})):u},t.defaultProps={highlightRegion:!0},t}(r.PureComponent),In=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMouseOver=function(){n.props.onPointHighlight&&n.props.onPointHighlight()},n.handleMouseLeave=function(){n.props.onPointUnHighlight&&n.props.onPointUnHighlight()},n.state={highlighted:!1},n}return Mn(t,e),t.prototype.componentDidUpdate=function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})},t.prototype.render=function(){var e=this.props.x,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),a=(this.props.className||"")+" "+(this.state.highlighted?"highlighted":"");return o.a.createElement("g",{className:a,transform:"translate("+n+", 0)",filter:"url(#dropShadow)",onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave},o.a.createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),o.a.createElement("circle",{cx:0,cy:0,r:r,className:"point-core"}))},t}(r.PureComponent),Un=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHighlight=function(e){return function(){if(n.props.onHighlight){var t=n.props.acknowledges[e];n.props.onHighlight(t,e)}n.bringToFront(e,!0)}},n.handleUnHighlight=function(){n.props.onUnHighlight&&n.props.onUnHighlight();var e=n.props.acknowledges.map((function(e,t){return t}));n.setState({order:e,highlighted:null})},n.bringToFront=function(e,t){void 0===t&&(t=!1);var r=n.props.acknowledges.map((function(e,t){return t}));r=Gn(r,[e]);var o=t?e:null;n.setState({order:r,highlighted:o})},n.state={order:[],highlighted:null},n}return Mn(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.acknowledges,r=t.timeRange,a=t.width,i=t.size,s=r.timeFrom,l=r.timeTo-s,c=i/2,u=n.map((function(t,n){var r=Number(t.clock),i=Math.round((r-s)/l*a-c),u=e.state.highlighted===n;return o.a.createElement(Kn,{key:t.eventid+"-"+n,x:i,r:c,highlighted:u,onHighlight:e.handleHighlight(n),onUnHighlight:e.handleUnHighlight})}));return this.state.order.length?this.state.order.map((function(e){return u[e]})):u},t}(r.PureComponent),Kn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHighlight=function(){n.props.onHighlight&&n.props.onHighlight()},n.handleUnHighlight=function(){n.props.onUnHighlight&&n.props.onUnHighlight()},n.state={highlighted:!1},n}return Mn(t,e),t.prototype.componentDidUpdate=function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})},t.prototype.render=function(){var e=this.props.x,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),a="problem-event-ack "+(this.state.highlighted?"highlighted":"");return o.a.createElement("g",{className:a,transform:"translate("+n+", 0)",filter:"url(#dropShadow)",onMouseOver:this.handleHighlight,onMouseLeave:this.handleUnHighlight},o.a.createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),o.a.createElement("circle",{cx:0,cy:0,r:r,className:"point-core"}))},t}(r.PureComponent);function Gn(e,t){var n=l.a.pullAt(e,t);return n.reverse(),e.push.apply(e,n),e}var qn,Vn,$n,Yn,Jn,Xn,Zn,Qn,er,tr,nr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},or=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ar=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ir=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeSelectedScript=function(e){var t=n.scripts.find((function(t){return e.value===t.scriptid}));n.setState({selectedScript:e,script:t,errorMessage:"",loading:!1,result:""})},n.dismiss=function(){n.setState({selectedScript:null,error:!1,errorMessage:"",selectError:"",loading:!1}),n.props.onDismiss()},n.submit=function(){var e=n.state.selectedScript;if(!e)return n.setState({selectError:"Select a script to execute."});n.setState({errorMessage:"",loading:!0,result:""});var t={scriptid:e.value};n.props.onSubmit(t).then((function(e){var t=n.formatResult((null==e?void 0:e.value)||"");"success"===(null==e?void 0:e.response)?n.setState({result:t,loading:!1}):n.setState({error:!0,errorMessage:t,loading:!1})})).catch((function(e){var t,r,o=(null===(t=e.data)||void 0===t?void 0:t.message)||(null===(r=e.data)||void 0===r?void 0:r.error)||e.data||e.statusText||"";o=n.formatResult(o),n.setState({error:!0,loading:!1,errorMessage:o})}))},n.formatResult=function(e){var t=e.split("\n").map((function(e,t){return o.a.createElement("p",{key:t},e)}));return o.a.createElement(o.a.Fragment,null,t)},n.state={error:!1,errorMessage:"",selectError:"",selectedScript:null,result:"",loading:!1,scriptOptions:[],script:null},n}return nr(t,e),t.prototype.componentDidMount=function(){return or(this,void 0,void 0,(function(){var e,t,n,r;return ar(this,(function(o){switch(o.label){case 0:return[4,this.props.getScripts()];case 1:return e=o.sent(),this.scripts=e,t=e.map((function(e){return{value:e.scriptid,label:e.name,description:e.description||e.command}})),n=(null==t?void 0:t.length)?t[0]:null,r=e.find((function(e){return n.value===e.scriptid})),this.setState({scriptOptions:t,selectedScript:n,script:r}),[2]}}))}))},t.prototype.render=function(){var e=this.props.theme,t=this.state,n=t.scriptOptions,r=t.selectedScript,a=t.script,i=t.result,s=t.selectError,l=t.errorMessage,c=t.error,u=sr(e),p=Object(oe.cx)(u.modal),d=Object(oe.cx)(u.modalHeaderTitle),f=Object(oe.cx)("gf-form-hint-text",u.inputError),m=Object(oe.cx)("gf-form",u.scriptCommandContainer),h=Object(oe.cx)("gf-form-hint-text",u.scriptCommand);return o.a.createElement(jt.Modal,{isOpen:!0,onDismiss:this.dismiss,className:p,title:o.a.createElement("div",{className:d},this.state.loading?o.a.createElement(jt.Spinner,{size:18}):o.a.createElement(ln,{icon:"terminal"}),o.a.createElement("span",{className:"p-l-1"},"Execute script"))},o.a.createElement("div",{className:"gf-form"},o.a.createElement("label",{className:"gf-form-hint"},o.a.createElement(jt.Select,{options:n,value:r,onChange:this.onChangeSelectedScript}),s&&o.a.createElement("small",{className:f},s))),o.a.createElement("div",{className:m},a&&o.a.createElement("small",{className:h},a.command)),o.a.createElement("div",{className:u.resultContainer},i&&o.a.createElement("span",{className:u.execResult},i),c&&o.a.createElement("span",{className:u.execError},l)),o.a.createElement("div",{className:"gf-form-button-row text-center"},o.a.createElement(jt.Button,{variant:"primary",onClick:this.submit},"Execute"),o.a.createElement(jt.Button,{variant:"secondary",onClick:this.dismiss},"Cancel")))},t}(r.PureComponent),sr=Object(jt.stylesFactory)((function(e){var t=e.palette.red;return{modal:Object(oe.css)(qn||(qn=rr(["\n      width: 600px;\n    "],["\n      width: 600px;\n    "]))),modalHeaderTitle:Object(oe.css)(Vn||(Vn=rr(["\n      font-size: ",";\n      padding-top: ",";\n      margin: 0 ",";\n      display: flex;\n    "],["\n      font-size: ",";\n      padding-top: ",";\n      margin: 0 ",";\n      display: flex;\n    "])),e.typography.heading.h3,e.spacing.sm,e.spacing.md),input:Object(oe.css)($n||($n=rr(["\n      border-color: ",";\n      border-radius: 2px;\n      outline-offset: 2px;\n      box-shadow: 0 0 0 2px ",", 0 0 0px 4px ",";\n    "],["\n      border-color: ",";\n      border-radius: 2px;\n      outline-offset: 2px;\n      box-shadow: 0 0 0 2px ",", 0 0 0px 4px ",";\n    "])),t,e.colors.bg1,t),scriptCommandContainer:Object(oe.css)(Yn||(Yn=rr(["\n      margin-bottom: ",";\n    "],["\n      margin-bottom: ",";\n    "])),e.spacing.md),scriptCommand:Object(oe.css)(Jn||(Jn=rr(["\n      color: ",";\n      text-align: left;\n      font-family: ",";\n    "],["\n      color: ",";\n      text-align: left;\n      font-family: ",";\n    "])),e.colors.textWeak,e.typography.fontFamily.monospace),inputHint:Object(oe.css)(Xn||(Xn=rr(["\n      display: inherit;\n      float: right;\n      color: ",";\n    "],["\n      display: inherit;\n      float: right;\n      color: ",";\n    "])),e.colors.textWeak),inputError:Object(oe.css)(Zn||(Zn=rr(["\n      float: left;\n      color: ",";\n    "],["\n      float: left;\n      color: ",";\n    "])),t),resultContainer:Object(oe.css)(Qn||(Qn=rr(["\n      min-height: 50px;\n      font-family: ",";\n      font-size: ",";\n      p {\n        font-size: ",";\n        margin-bottom: 0px;\n      }\n    "],["\n      min-height: 50px;\n      font-family: ",";\n      font-size: ",";\n      p {\n        font-size: ",";\n        margin-bottom: 0px;\n      }\n    "])),e.typography.fontFamily.monospace,e.typography.size.sm,e.typography.size.sm),execResult:Object(oe.css)(er||(er=rr(["\n    "],["\n    "]))),execError:Object(oe.css)(tr||(tr=rr(["\n      color: ",";\n    "],["\n      color: ",";\n    "])),t)}})),lr=Object(jt.withTheme)(ir),cr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ur=function(e){function t(t){var n=e.call(this,t)||this;return n.handleTagClick=function(e,t,r){n.props.onTagClick&&n.props.onTagClick(e,n.props.original.datasource,t,r)},n.ackProblem=function(e){var t=n.props.original;return n.props.onProblemAck(t,e)},n.getScripts=function(){var e=n.props.original;return n.props.getScripts(e)},n.onExecuteScript=function(e){var t=n.props.original;return n.props.onExecuteScript(t,e.scriptid)},n.state={events:[],alerts:[],show:!1},n}return cr(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeline&&this.fetchProblemEvents(),this.fetchProblemAlerts(),requestAnimationFrame((function(){e.setState({show:!0})}))},t.prototype.fetchProblemEvents=function(){var e=this,t=this.props.original;this.props.getProblemEvents(t).then((function(t){e.setState({events:t})}))},t.prototype.fetchProblemAlerts=function(){var e=this,t=this.props.original;this.props.getProblemAlerts(t).then((function(t){e.setState({alerts:t})}))},t.prototype.render=function(){var e=this,t=this.props.original,n=this.state.alerts,r=this.props.rootWidth,a=this.state.show?"show":"",i=r>1200,s=r<800||t.acknowledges&&i&&r<1400,l=ne.a.unix(t.timestamp).fromNow(!0),c=t.acknowledges&&0!==t.acknowledges.length,u=Number(t.severity);return o.a.createElement("div",{className:"problem-details-container "+a},o.a.createElement("div",{className:"problem-details"},o.a.createElement("div",{className:"problem-details-row"},o.a.createElement("div",{className:"problem-value-container"},o.a.createElement("div",{className:"problem-age"},o.a.createElement(ln,{icon:"clock-o"}),o.a.createElement("span",null,l)),t.items&&o.a.createElement(fr,{items:t.items})),o.a.createElement("div",{className:"problem-actions-left"},o.a.createElement(mn,{problem:t,panelId:this.props.panelId})),o.a.createElement(zn,{problem:t,alerts:n,className:s&&"compact"}),t.showAckButton&&o.a.createElement("div",{className:"problem-actions"},o.a.createElement(Cn,null,(function(t){var n=t.showModal,r=t.hideModal;return o.a.createElement(gn,{className:"navbar-button navbar-button--settings",onClick:function(){n(lr,{getScripts:e.getScripts,onSubmit:e.onExecuteScript,onDismiss:r})}})})),o.a.createElement(Cn,null,(function(n){var r=n.showModal,a=n.hideModal;return o.a.createElement(fn,{className:"navbar-button navbar-button--settings",onClick:function(){r(jn,{canClose:"1"===t.manual_close,severity:u,onSubmit:e.ackProblem,onDismiss:a})}})})))),t.comments&&o.a.createElement("div",{className:"problem-description-row"},o.a.createElement("div",{className:"problem-description"},o.a.createElement(It,{placement:"right",content:t.comments},o.a.createElement("span",{className:"description-label"},"Description: ")),o.a.createElement("span",null,t.comments))),t.tags&&t.tags.length>0&&o.a.createElement("div",{className:"problem-tags"},t.tags&&t.tags.map((function(n){return o.a.createElement(rn,{key:n.tag+n.value,tag:n,highlight:n.tag===t.correlation_tag,onClick:e.handleTagClick})}))),this.props.showTimeline&&this.state.events.length>0&&o.a.createElement(An,{events:this.state.events,timeRange:this.props.timeRange}),c&&!i&&o.a.createElement("div",{className:"problem-ack-container"},o.a.createElement("h6",null,o.a.createElement(ln,{icon:"reply-all"})," Acknowledges"),o.a.createElement(Dn,{acknowledges:t.acknowledges}))),c&&i&&o.a.createElement("div",{className:"problem-details-middle"},o.a.createElement("div",{className:"problem-ack-container"},o.a.createElement("h6",null,o.a.createElement(ln,{icon:"reply-all"})," Acknowledges"),o.a.createElement(Dn,{acknowledges:t.acknowledges}))),o.a.createElement("div",{className:"problem-details-right"},o.a.createElement("div",{className:"problem-details-right-item"},o.a.createElement(ln,{icon:"database"}),o.a.createElement("span",null,t.datasource)),t.proxy&&o.a.createElement("div",{className:"problem-details-right-item"},o.a.createElement(ln,{icon:"cloud"}),o.a.createElement("span",null,t.proxy)),t.groups&&o.a.createElement(mr,{groups:t.groups,className:"problem-details-right-item"}),t.hosts&&o.a.createElement(hr,{hosts:t.hosts,className:"problem-details-right-item"})))},t}(r.PureComponent);function pr(e){var t=e.item,n=e.showName,r=on.f(t.name,t.key_);return o.a.createElement("div",{className:"problem-item"},o.a.createElement(ln,{icon:"thermometer-three-quarters"}),n&&o.a.createElement("span",{className:"problem-item-name"},t.name,": "),o.a.createElement(It,{placement:"top-start",content:function(){return o.a.createElement(o.a.Fragment,null,r,o.a.createElement("br",null),t.lastvalue)}},o.a.createElement("span",{className:"problem-item-value"},t.lastvalue)))}var dr,fr=function(e){var t=e.items;return o.a.createElement("div",{className:"problem-items-row"},t.length>1?t.map((function(e){return o.a.createElement(pr,{item:e,key:e.itemid,showName:!0})})):o.a.createElement(pr,{item:t[0]}))},mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cr(t,e),t.prototype.render=function(){var e=this;return this.props.groups.map((function(t){return o.a.createElement("div",{className:e.props.className||"",key:t.groupid},o.a.createElement(ln,{icon:"folder"}),o.a.createElement("span",null,t.name))}))},t}(r.PureComponent),hr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cr(t,e),t.prototype.render=function(){var e=this;return this.props.hosts.map((function(t){return o.a.createElement("div",{className:e.props.className||"",key:t.hostid},o.a.createElement(ln,{icon:"server"}),o.a.createElement("span",null,t.name))}))},t}(r.PureComponent),gr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},vr=Object(jt.stylesFactory)((function(e){return{countLabel:Object(oe.css)(dr||(dr=gr(["\n      font-size: ",";\n    "],["\n      font-size: ",";\n    "])),e.typography.size.sm)}})),yr=function(e){var t,n,r=e.original,a=Object(jt.useTheme)(),i=vr(a);return o.a.createElement("div",null,(null===(t=r.acknowledges)||void 0===t?void 0:t.length)>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ln,{icon:"comments"}),o.a.createElement("span",{className:i.countLabel}," (",null===(n=r.acknowledges)||void 0===n?void 0:n.length,")")))},br=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Er=function(){return(Er=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xr=function(e){function t(t){var n=e.call(this,t)||this;return n.setRootRef=function(e){n.rootRef=e},n.handleProblemAck=function(e,t){return n.props.onProblemAck(e,t)},n.onExecuteScript=function(e,t){},n.handlePageSizeChange=function(e,t){n.props.onPageSizeChange&&n.props.onPageSizeChange(e,t)},n.handleResizedChange=function(e,t){n.props.onColumnResize&&n.props.onColumnResize(e)},n.handleExpandedChange=function(e,t){var r=n.props,o=r.problems,a=r.pageSize,i=n.state.page,s={};for(var l in e){var c=a*i+Number(l);if(e[l]&&c<o.length){var u=o[c].eventid;u&&(s[u]=!0)}}var p=Er({},n.state.expanded);p[i]=e;var d=Er({},n.state.expandedProblems);d[i]=s,n.setState({expanded:p,expandedProblems:d})},n.handleTagClick=function(e,t,r,o){n.props.onTagClick&&n.props.onTagClick(e,t,r,o)},n.getExpandedPage=function(e){for(var t=n.props,r=t.problems,o=t.pageSize,a=n.state.expandedProblems[e]||{},i={},s=o*e,l=Math.min(s+o,r.length),c=s;c<l;c++){a[r[c].eventid]&&(i[c-s]={})}return i},n.state={expanded:{},expandedProblems:{},page:0},n}return br(t,e),t.prototype.buildColumns=function(){for(var e=this,t=[],n=this.props.panelOptions,r=n.highlightNewEvents&&n.highlightNewerThan,a=0,i=[{Header:"Host",id:"host",show:n.hostField,Cell:function(e){return o.a.createElement(wr,{name:e.original.host,maintenance:e.original.maintenance})}},{Header:"Host (Technical Name)",id:"hostTechName",show:n.hostTechNameField,Cell:function(e){return o.a.createElement(wr,{name:e.original.hostTechName,maintenance:e.original.maintenance})}},{Header:"Host Groups",accessor:"groups",show:n.hostGroups,Cell:Cr},{Header:"Proxy",accessor:"proxy",show:n.hostProxy},{Header:"Severity",show:n.severityField,className:"problem-severity",width:120,accessor:function(e){return e.priority},id:"severity",Cell:function(e){return function(e,t,n,r,a){void 0===a&&(a=Pr);var i,s,c=e.original,u=Number(c.severity);s=l.a.find(t,(function(e){return e.priority===u})),c.severity&&"1"===c.value&&(s=l.a.find(t,(function(e){return e.priority===u})));i="0"===c.value?a:s.color,n&&"1"===c.acknowledged&&(i=r);return o.a.createElement("div",{className:"severity-cell",style:{background:i}},s.severity)}(e,n.triggerSeverity,n.markAckEvents,n.ackEventColor,n.okEventColor)}},{Header:"",id:"statusIcon",show:n.statusIcon,className:"problem-status-icon",width:50,accessor:"value",Cell:function(e){return function(e,t){var n="0"===e.value?"ok":"problem",r=!1;t&&(r=Object(re.c)(e.original,t));var a=v()("zbx-problem-status-icon",{"problem-status--new":r},{"zbx-problem":"1"===e.value},{"zbx-ok":"0"===e.value});return o.a.createElement(sn,{status:n,className:a})}(e,r)}},{Header:"Status",accessor:"value",show:n.statusField,width:100,Cell:function(e){return function(e,t){var n="0"===e.value?"RESOLVED":"PROBLEM",r="0"===e.value?Pr:"rgb(215, 0, 0)",a=!1;t&&(a=Object(re.c)(e.original,t));return o.a.createElement("span",{className:a?"problem-status--new":"",style:{color:r}},n)}(e,r)}},{Header:"Problem",accessor:"description",minWidth:200,Cell:Or},{Header:"Ack",id:"ack",show:n.ackField,width:70,Cell:function(e){return o.a.createElement(yr,Er({},e))}},{Header:"Tags",accessor:"tags",show:n.showTags,className:"problem-tags",Cell:function(t){return o.a.createElement(kr,Er({},t,{onTagClick:e.handleTagClick}))}},{Header:"Age",className:"problem-age",width:100,show:n.ageField,accessor:"timestamp",id:"age",Cell:Sr},{Header:"Time",className:"last-change",width:150,accessor:"timestamp",id:"lastchange",Cell:function(e){return function(e,t){var n=e.original,r=ne.a.unix(n.timestamp),a=t||"DD MMM YYYY HH:mm:ss",i=r.format(a);return o.a.createElement("span",null,i)}(e,n.customLastChangeFormat&&n.lastChangeFormat)}},{Header:"",className:"custom-expander",width:60,expander:!0,Expander:Nr}];a<i.length;a++){var s=i[a];(s.show||void 0===s.show)&&(delete s.show,t.push(s))}return t},t.prototype.render=function(){var e,t=this,n=this.buildColumns();this.rootWidth=this.rootRef&&this.rootRef.clientWidth;var r=this.props,a=r.pageSize,i=r.fontSize,s=r.panelOptions,c=v()("panel-problems",((e={})["font-size--"+i]=i,e)),u=[5,10,20,25,50,100];return a&&(u.push(a),u=l.a.uniq(l.a.sortBy(u))),o.a.createElement("div",{className:c,ref:this.setRootRef},o.a.createElement(ee,{data:this.props.problems,columns:n,defaultPageSize:10,pageSize:a,pageSizeOptions:u,resized:s.resizedColumns,minRows:0,loading:this.props.loading,noDataText:"No problems found",SubComponent:function(e){return o.a.createElement(ur,Er({},e,{rootWidth:t.rootWidth,timeRange:t.props.timeRange,showTimeline:s.problemTimeline,panelId:t.props.panelId,getProblemEvents:t.props.getProblemEvents,getProblemAlerts:t.props.getProblemAlerts,getScripts:t.props.getScripts,onProblemAck:t.handleProblemAck,onExecuteScript:t.props.onExecuteScript,onTagClick:t.handleTagClick,subRows:!1}))},expanded:this.getExpandedPage(this.state.page),onExpandedChange:this.handleExpandedChange,onPageChange:function(e){return t.setState({page:e})},onPageSizeChange:this.handlePageSizeChange,onResizedChange:this.handleResizedChange}))},t}(r.PureComponent),wr=function(e){var t=e.name,n=e.maintenance;return o.a.createElement("div",null,o.a.createElement("span",{style:{paddingRight:"0.4rem"}},t),n&&o.a.createElement(ln,{customClass:"fired",icon:"wrench"}))};var Pr="rgb(56, 189, 113)";function Cr(e){var t="";return e.value&&e.value.length&&(t=e.value.map((function(e){return e.name})).join(", ")),o.a.createElement("span",null,t)}function Or(e){e.original.comments;return o.a.createElement("div",null,o.a.createElement("span",{className:"problem-description"},e.value))}function Sr(e){var t=e.original,n=ne.a.unix(t.timestamp).fromNow(!0);return o.a.createElement("span",null,n)}var kr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTagClick=function(e,n,r){t.props.onTagClick&&t.props.onTagClick(e,t.props.original.datasource,n,r)},t}return br(t,e),t.prototype.render=function(){var e=this;return[(this.props.value||[]).map((function(t){return o.a.createElement(rn,{key:t.tag+t.value,tag:t,onClick:e.handleTagClick})}))]},t}(r.PureComponent);function Nr(e){return o.a.createElement("span",{className:e.isExpanded?"expanded":""},o.a.createElement("i",{className:"fa fa-info-circle"}))}var Tr,jr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t}return jr(t,e),t.prototype.render=function(){var e=this.props.problem,t=e.acknowledges&&e.acknowledges.map((function(e){return o.a.createElement("tr",{key:e.acknowledgeid},o.a.createElement("td",null,e.time),o.a.createElement("td",null,e.user),o.a.createElement("td",null,e.message))}));return o.a.createElement("div",{className:"ack-tooltip"},o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"ack-time"},"Time"),o.a.createElement("th",{className:"ack-user"},"User"),o.a.createElement("th",{className:"ack-comments"},"Comments"))),o.a.createElement("tbody",null,t)),e.showAckButton&&o.a.createElement("div",{className:"ack-add-button"},o.a.createElement("button",{id:"add-acknowledge-btn",className:"btn btn-mini btn-inverse gf-form-button",onClick:this.handleClick},o.a.createElement("i",{className:"fa fa-plus"}))))},t}(r.PureComponent),_r=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Dr=function(e){var t=e.problem,n=e.color,r=e.blink,a=e.highlightBackground,i=Number(t.severity),s="1"===t.value&&i>=2?"critical":"online",l=Object(oe.cx)("icon-gf",r&&"zabbix-trigger--blinked"),c=Object(oe.cx)("alert-rule-item__icon",!a&&Object(oe.css)(Tr||(Tr=_r(["color: ",""],["color: ",""])),n));return o.a.createElement("div",{className:c},o.a.createElement(sn,{status:s,className:l}))},Mr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTagClick=function(e,n,r){t.props.onTagClick&&t.props.onTagClick(e,t.props.problem.datasource,n,r)},t.ackProblem=function(e){var n=t.props.problem;return t.props.onProblemAck(n,e)},t}return Mr(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=n.problem,a=n.panelOptions,i=a.targets&&a.targets.length>1,s=v()("alert-rule-item","zbx-trigger-card",{"zbx-trigger-highlighted":a.highlightBackground}),c=v()("alert-rule-item__text",{"zbx-description--newline":a.descriptionAtNewLine}),u=Number(r.severity);e=l.a.find(a.triggerSeverity,(function(e){return e.priority===u})),r.severity&&(e=l.a.find(a.triggerSeverity,(function(e){return e.priority===u})));var p=Object(re.a)(r.timestamp,a.customLastChangeFormat&&a.lastChangeFormat),d=ne.a.unix(r.timestamp).fromNow(!0),f=!1;a.highlightNewerThan&&(f=Object(re.c)(r,a.highlightNewerThan));var m,h=a.highlightNewEvents&&f;m="0"===r.value?a.okEventColor:a.markAckEvents&&"1"===r.acknowledged?a.ackEventColor:e.color;var g={};return a.highlightBackground&&(g.backgroundColor=m),o.a.createElement("li",{className:s,style:g},o.a.createElement(Dr,{problem:r,color:m,highlightBackground:a.highlightBackground,blink:h}),o.a.createElement("div",{className:"alert-rule-item__body"},o.a.createElement("div",{className:"alert-rule-item__header"},o.a.createElement("div",{className:"alert-rule-item__name"},o.a.createElement("span",{className:"zabbix-trigger-name"},r.description),(a.hostField||a.hostTechNameField)&&o.a.createElement(Fr,{problem:r,panelOptions:a}),a.hostGroups&&o.a.createElement(Ar,{problem:r,panelOptions:a}),a.showTags&&o.a.createElement("span",{className:"zbx-trigger-tags"},r.tags&&r.tags.map((function(e){return o.a.createElement(rn,{key:e.tag+e.value,tag:e,highlight:e.tag===r.correlation_tag,onClick:t.handleTagClick})})))),o.a.createElement("div",{className:c},a.statusField&&o.a.createElement(Hr,{problem:r,blink:h}),a.severityField&&o.a.createElement(Br,{severityDesc:e,blink:h,highlightBackground:a.highlightBackground}),o.a.createElement("span",{className:"alert-rule-item__time"},a.ageField&&"for "+d),a.descriptionField&&!a.descriptionAtNewLine&&o.a.createElement("span",{className:"zbx-description",dangerouslySetInnerHTML:{__html:r.comments}})),a.descriptionField&&a.descriptionAtNewLine&&o.a.createElement("div",{className:"alert-rule-item__text zbx-description--newline"},o.a.createElement("span",{className:"alert-rule-item__info zbx-description",dangerouslySetInnerHTML:{__html:r.comments}})))),i&&o.a.createElement("div",{className:"alert-rule-item__time zabbix-trigger-source"},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-database"}),r.datasource)),o.a.createElement("div",{className:"alert-rule-item__time zbx-trigger-lastchange"},o.a.createElement("span",null,p||"last change unknown"),o.a.createElement("div",{className:"trigger-info-block zbx-status-icons"},r.url&&o.a.createElement("a",{href:r.url,target:"_blank"},o.a.createElement("i",{className:"fa fa-external-link"})),"1"===r.state&&o.a.createElement(It,{placement:"bottom",content:r.error},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-question-circle"}))),r.eventid&&o.a.createElement(Cn,null,(function(e){var n=e.showModal,a=e.hideModal;return o.a.createElement(Wr,{problem:r,onClick:function(){n(jn,{canClose:"1"===r.manual_close,severity:u,onSubmit:t.ackProblem,onDismiss:a})}})})))))},t}(r.PureComponent);function Fr(e){var t=e.problem,n=e.panelOptions,r="";return n.hostField&&n.hostTechNameField?r=t.host+" ("+t.hostTechName+")":(n.hostField||n.hostTechNameField)&&(r=n.hostField?t.host:t.hostTechName),n.hostProxy&&t.proxy&&(r=t.proxy+": "+r),o.a.createElement("span",{className:"zabbix-hostname"},t.maintenance&&o.a.createElement("i",{className:"fa fa-wrench zbx-maintenance-icon"}),r)}function Ar(e){var t=e.problem,n="";e.panelOptions.hostGroups&&(n+="[ "+l.a.map(t.groups,"name").join(", ")+" ]");return o.a.createElement("span",{className:"zabbix-hostname"},n)}function Hr(e){var t=e.problem,n=e.okColor,r=e.problemColor,a=e.blink,i="0"===t.value?"RESOLVED":"PROBLEM",s=(t.value,v()("zbx-trigger-state",{"alert-state-critical":"1"===t.value},{"alert-state-ok":"0"===t.value},{"zabbix-trigger--blinked":a}));return o.a.createElement("span",{className:s},i)}function Br(e){var t=e.severityDesc,n=e.highlightBackground,r=e.blink,a=v()("zbx-trigger-severity",{"zabbix-trigger--blinked":r}),i={};return n||(i.color=t.color),o.a.createElement("span",{className:a,style:i},t.severity)}var Wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t.renderTooltipContent=function(){return o.a.createElement(zr,{problem:t.props.problem,onClick:t.handleClick})},t}return Mr(t,e),t.prototype.render=function(){var e=this.props.problem,t=null;return e.acknowledges&&e.acknowledges.length?t=o.a.createElement(It,{placement:"bottom",popperClassName:"ack-tooltip",content:this.renderTooltipContent},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-comments"}))):e.showAckButton&&(t=o.a.createElement(It,{placement:"bottom",content:"Acknowledge problem"},o.a.createElement("span",{role:"button",onClick:this.handleClick},o.a.createElement("i",{className:"fa fa-comments-o"})))),t},t}(r.PureComponent),Lr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ir=function(e){function t(t){var n=e.call(this,t)||this;return n.handlePageChange=function(e){var t=n.getCurrentProblems(e);n.setState({page:e,currentProblems:t})},n.handleTagClick=function(e,t,r,o){n.props.onTagClick&&n.props.onTagClick(e,t,r,o)},n.handleProblemAck=function(e,t){return n.props.onProblemAck(e,t)},n.state={page:0,currentProblems:n.getCurrentProblems(0)},n}return Lr(t,e),t.prototype.getCurrentProblems=function(e){var t=this.props,n=t.pageSize,r=t.problems,o=n*e,a=Math.min(n*(e+1),r.length);return this.props.problems.slice(o,a)},t.prototype.render=function(){var e,t=this,n=this.props,r=n.problems,a=n.panelOptions,i=this.getCurrentProblems(this.state.page),s=parseInt(a.fontSize.slice(0,a.fontSize.length-1),10);s=s&&100!==s?s:null;var l=v()("alert-rule-list",((e={})["font-size--"+s]=s,e));return o.a.createElement("div",{className:"triggers-panel-container",key:"alertListContainer"},o.a.createElement("section",{className:"card-section card-list-layout-list"},o.a.createElement("ol",{className:l},i.map((function(e){return o.a.createElement(Rr,{key:e.triggerid+"-"+e.eventid+"-"+e.datasource,problem:e,panelOptions:a,onTagClick:t.handleTagClick,onProblemAck:t.handleProblemAck})})))),o.a.createElement("div",{className:"triggers-panel-footer",key:"alertListFooter"},o.a.createElement(Ur,{itemsLength:r.length,pageSize:this.props.pageSize,pageIndex:this.state.page,onPageChange:this.handlePageChange})))},t}(r.PureComponent),Ur=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePageChange=function(e){return function(){t.props.onPageChange(e)}},t}return Lr(t,e),t.prototype.render=function(){var e=this.props,t=e.itemsLength,n=e.pageIndex,r=e.pageSize,a=Math.ceil(t/r);if(1===a)return o.a.createElement("ul",null);for(var i=Math.max(n-3,0),s=Math.min(a,i+9),l=[],c=i;c<s;c++){var u=v()("triggers-panel-page-link","pointer",{active:c===n}),p=c+1,d=o.a.createElement("li",{key:p.toString()},o.a.createElement("a",{className:u,onClick:this.handlePageChange(c)},p));l.push(d)}return o.a.createElement("ul",null,l)},t}(r.PureComponent),Kr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr=[{priority:0,severity:"Not classified",color:"rgb(108, 108, 108)",show:!0},{priority:1,severity:"Information",color:"rgb(120, 158, 183)",show:!0},{priority:2,severity:"Warning",color:"rgb(175, 180, 36)",show:!0},{priority:3,severity:"Average",color:"rgb(255, 137, 30)",show:!0},{priority:4,severity:"High",color:"rgb(255, 101, 72)",show:!0},{priority:5,severity:"Disaster",color:"rgb(215, 0, 0)",show:!0}],qr={schemaVersion:h.a,targets:[{}],hostField:!0,hostTechNameField:!1,hostProxy:!1,hostGroups:!1,showTags:!0,statusField:!0,statusIcon:!1,severityField:!0,ackField:!0,ageField:!1,descriptionField:!0,descriptionAtNewLine:!1,sortProblems:"lastchange",limit:null,layout:"table",fontSize:"100%",pageSize:10,problemTimeline:!0,highlightBackground:!1,highlightNewEvents:!1,highlightNewerThan:"1h",customLastChangeFormat:!1,lastChangeFormat:"",resizedColumns:[],triggerSeverity:Gr,okEventColor:"rgb(56, 189, 113)",ackEventColor:"rgb(56, 219, 156)",markAckEvents:!1},Vr={0:"OK",1:"PROBLEM"},$r=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.scope=t,o.$timeout=r,o.useDataFrames=!0,o.triggerStatusMap=Vr,o.defaultTimeFormat="DD MMM YYYY HH:mm:ss",o.pageIndex=0,o.range={},o.renderData=[],o.panel=Object(h.b)(o.panel),l.a.defaultsDeep(o.panel,l.a.cloneDeep(qr)),o.events.on("data-frames-received",o.onDataFramesReceived.bind(o)),o.events.on(u.PanelEvents.dataSnapshotLoad,o.onDataSnapshotLoad.bind(o)),o.events.on(u.PanelEvents.editModeInitialized,o.onInitEditMode.bind(o)),o}return t.$inject=["$scope","$injector","$timeout"],Kr(t,e),t.prototype.onInitEditMode=function(){this.panel.schemaVersion=h.a,this.addEditorTab("Options",m)},t.prototype.onDataFramesReceived=function(e){this.range=this.timeSrv.timeRange();var t=[];if(e&&e.length)for(var n=0,r=e;n<r.length;n++){var o=r[n];try{var a=o.fields[0].values;a.toArray?t.push(a.toArray()):a.length>0&&t.push(a)}catch(e){return console.log(e),Promise.reject(e)}}return this.loading=!1,t=l.a.flatten(t),this.problems=t,this.renderProblems(t)},t.prototype.onDataSnapshotLoad=function(e){return this.onDataFramesReceived(e)},t.prototype.reRenderProblems=function(){this.problems&&this.renderProblems(this.problems)},t.prototype.setPanelError=function(e,t){void 0===t&&(t="Request Error"),this.inspector={error:e},this.error=e.message||t,e.data&&(e.data.message&&(this.error=e.data.message),e.data.error&&(this.error=e.data.error)),console.log("Panel data error:",e)},t.prototype.renderProblems=function(t){var n=this,r=l.a.cloneDeep(t);return r=l.a.map(r,this.formatTrigger.bind(this)),r=this.filterProblems(r),r=this.sortTriggers(r),this.renderData=r,this.$timeout((function(){return e.prototype.render.call(n,r)}))},t.prototype.filterProblems=function(e){var t=this,n=l.a.cloneDeep(e);return"unacknowledged"===this.panel.showTriggers?n=l.a.filter(n,(function(e){return!(e.acknowledges&&e.acknowledges.length)})):"acknowledged"===this.panel.showTriggers&&(n=l.a.filter(n,(function(e){return e.acknowledges&&e.acknowledges.length}))),n=l.a.filter(n,(function(e){return e.severity?t.panel.triggerSeverity[e.severity].show:t.panel.triggerSeverity[e.priority].show}))},t.prototype.sortTriggers=function(e){return"priority"===this.panel.sortProblems?e=l.a.orderBy(e,["severity","timestamp","eventid"],["desc","desc","desc"]):"lastchange"===this.panel.sortProblems&&(e=l.a.orderBy(e,["timestamp","severity","eventid"],["desc","desc","desc"])),e},t.prototype.formatTrigger=function(e){var t=l.a.cloneDeep(e);if(t.hosts&&t.hosts.length){var n=t.hosts[0];t.host=n.name,t.hostTechName=n.host,n.proxy&&(t.proxy=n.proxy)}return t.tags&&0===t.tags.length&&(t.tags=null),t.comments&&(t.comments=t.comments.replace("\n","<br>")),t.lastchangeUnix=Number(t.lastchange),t},t.prototype.parseTags=function(e){if(!e)return[];var t=l.a.map(e.split(","),(function(e){return e.trim()}));return t=l.a.map(t,(function(e){var t=e.split(":");return{tag:t[0].trim(),value:t[1].trim()}}))},t.prototype.tagsToString=function(e){return l.a.map(e,(function(e){return e.tag+":"+e.value})).join(", ")},t.prototype.addTagFilter=function(e,t){for(var n=0,r=this.panel.targets;n<r.length;n++){var o=r[n];if(o.datasource===t||this.panel.datasource===t){var a=o.tags.filter,i=this.parseTags(a),s={tag:e.tag,value:e.value};i.push(s),i=l.a.uniqWith(i,l.a.isEqual);var c=this.tagsToString(i);o.tags.filter=c}}this.refresh()},t.prototype.removeTagFilter=function(e,t){for(var n=function(t){return t.tag===e.tag&&t.value===e.value},r=0,o=this.panel.targets;r<o.length;r++){var a=o[r];if(a.datasource===t||this.panel.datasource===t){var i=a.tags.filter,s=this.parseTags(i);l.a.remove(s,n),s=l.a.uniqWith(s,l.a.isEqual);var c=this.tagsToString(s);a.tags.filter=c}}this.refresh()},t.prototype.getProblemEvents=function(e){var t=[e.triggerid],n=Math.ceil(p.parse(this.range.from)/1e3),r=Math.ceil(p.parse(this.range.to)/1e3);return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){return e.zabbix.getEvents(t,n,r,[0,1],100)}))},t.prototype.getProblemAlerts=function(e){if(!e.eventid)return Promise.resolve([]);var t=[e.eventid];return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){return e.zabbix.getEventAlerts(t)}))},t.prototype.getProblemScripts=function(e){var t,n=(null===(t=e.hosts)||void 0===t?void 0:t.length)?e.hosts[0].hostid:null;return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){return e.zabbix.getScripts([n])}))},t.prototype.getAlertIconClassBySeverity=function(e){var t="icon-gf-online";return e.priority>=2&&(t="icon-gf-critical"),t},t.prototype.resetResizedColumns=function(){this.panel.resizedColumns=[],this.render()},t.prototype.acknowledgeProblem=function(e,t,n,r){var o=this,a=e.eventid,i=this.contextSrv.user.name+" (Grafana): "+t;return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){var t=o.contextSrv.isEditor||o.contextSrv.isGrafanaAdmin;return e.disableReadOnlyUsersAck&&!t?Promise.reject({message:"You have no permissions to acknowledge events."}):a?e.zabbix.acknowledgeEvent(a,i,n,r):Promise.reject({message:"Trigger has no events. Nothing to acknowledge."})})).then(this.refresh.bind(this)).catch((function(e){return o.setPanelError(e),Promise.reject(e)}))},t.prototype.executeScript=function(e,t){var n,r=(null===(n=e.hosts)||void 0===n?void 0:n.length)?e.hosts[0].hostid:null;return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){return e.zabbix.executeScript(r,t)}))},t.prototype.handlePageSizeChange=function(e,t){var n=this;this.panel.pageSize=e,this.pageIndex=t,this.scope.$apply((function(){n.render()}))},t.prototype.handleColumnResize=function(e){var t=this;this.panel.resizedColumns=e,this.scope.$apply((function(){t.render()}))},t.prototype.link=function(e,t,n,r){var a=this,s=r.panel;r.events.on(u.PanelEvents.render,(function(e){(function(e){var n=Math.ceil(p.parse(r.range.from)/1e3),a=Math.ceil(p.parse(r.range.to)/1e3),l=parseInt(s.fontSize.slice(0,s.fontSize.length-1),10),c=l&&100!==l?l:null,u=s.pageSize||10,d=r.loading&&(!e||!e.length),f={};for(var m in qr)f[m]=r.panel[m];var h,g={problems:e,panelOptions:f,timeRange:{timeFrom:n,timeTo:a},loading:d,pageSize:u,fontSize:c,panelId:r.panel.id,getProblemEvents:r.getProblemEvents.bind(r),getProblemAlerts:r.getProblemAlerts.bind(r),getScripts:r.getProblemScripts.bind(r),onPageSizeChange:r.handlePageSizeChange.bind(r),onColumnResize:r.handleColumnResize.bind(r),onProblemAck:function(e,t){var n=t.message,o=t.action,a=t.severity;return r.acknowledgeProblem(e,n,o,a)},onExecuteScript:r.executeScript.bind(r),onTagClick:function(e,t,n,o){n||o?r.removeTagFilter(e,t):r.addTagFilter(e,t)}};h="list"===s.layout?o.a.createElement(Ir,g):o.a.createElement(xr,g);var v=t.find(".panel-content");v&&v.length?i.a.render(h,v[0]):i.a.render(h,t[0])})(e=e||a.renderData),r.renderingCompleted()}))},t}(d.MetricsPanelCtrl);$r.templateUrl="public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/module.html",n.d(t,"PanelCtrl",(function(){return $r})),Object(d.loadPluginCss)({dark:"plugins/alexanderzobnin-zabbix-app/css/grafana-zabbix.dark.css",light:"plugins/alexanderzobnin-zabbix-app/css/grafana-zabbix.light.css"})}])}));
//# sourceMappingURL=module.js.map